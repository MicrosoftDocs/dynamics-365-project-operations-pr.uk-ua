---
title: Продуктивність API планування проектів
description: У цьому розділі наведено інформацію про опорні позначки продуктивності API планування проектів та описано рекомендації для оптимального використання.
author: ruhercul
ms.date: 11/03/2021
ms.topic: article
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: a1abadbae044ccbd40077c6937262f0f17387bad
ms.sourcegitcommit: 5c536cf05e2cbfc1d15982e4695d726064a074da
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 11/04/2021
ms.locfileid: "7750627"
---
# <a name="project-schedule-api-performance"></a>Продуктивність API планування проектів

_**Застосовується до:** Project Operations для сценаріїв на основі ресурсів і відсутності запасів, Розгортання Lite: від угоди до рахунків-проформ, Project for the web_

У цьому розділі наведено інформацію про опорні позначки продуктивності прикладних програмних інтерфейсів (API) планування проектів та описано рекомендації для оптимізації використання.

## <a name="project-scheduling-service"></a>Служба планування проектів
Служба планування проектів — це послуга, що поширюється на кілька клієнтів і працює в Microsoft Azure. Вона розроблена для покращення взаємодій і забезпечує швидку й плавну роботу користувачів над проектами. Таке покращення досягається через прийняття запитів на внесення змін, їх обробки та негайного повернення результату. Служба асинхронно виконується в межах Dataverse та не заважає користувачам здійснювати інші операції.

API планування проектів використовують в роботі службу планування проектів для виконання запитів, описаних у подальших розділах цієї теми.

API планування проектів призначені для роботи з такими сутностями робочої структури проекту (WBS):

  - Project
  - Проектне завдання
  - Залежність проектного завдання
  - Учасник робочої групи проекту
  - Призначення ресурсів
  
Підтримуються як готові, так і настроювані поля. Якщо не зазначено іншого, підтримуються всі загальні операції, такі як створення, оновлення та видалення. Для отримання додаткових відомостей див. [Використання API планування проектів та планування сутностей](schedule-api-preview.md).

В рамках API планування проектів було додано шаблон одиниці роботи. Цей шаблон називається OperationSet і його можна використовувати, якщо в одній транзакцій потрібно обробляти кілька запитів.

На наведеній нижче ілюстрації показано цикл, який застосовуватиметься при використанні цієї функції партнером.

![Dataverse і цикл служби розкладу проекту.](./media/dataverse-project-scheduling-service-flow.png)

**Крок 1**: клієнт виконує виклик API до кінцевої точки відкритого протоколу даних (OData) у Dataverse, щоб створити набір операцій OperationSet.

**Крок 2**: після створення нового OperationSet повертається значення **OperationSetId**.

**Крок 3**: клієнт використовує значення **OperationSetId**, щоб виконати інший запит до API планування проектів. Результатом стає запит на створення, оновлення або видалення для сутності планування. Після здійснення запиту виконується перевірка метаданих. Якщо перевірку не буде завершено, запит припинено, і повертаються повідомлення про помилку.

**Кроки 4а–4в**: ці кроки відповідають стадії ACCEPT. Клієнт викликає API **ExecuteOperationSetV1**, який надсилає всі зміни до служби планування проекту одним пакетом. Служба планування проектів виконує власні перевірки на запити пакета. Будь-які помилки перевірки скасовують обробку пакета й повертають виняток замість результату. Якщо пакет успішно прийнято службою планування проектів, стан OperationSet оновлюється, щоб відобразити, що OperationSet обробляється службою планування проектів.

**Крок 5**: цей крок відповідає стадії PERSIST. Служба планування проектів виконує транзакцію та асинхронно записує пакет до Dataverse. Якщо операція записування виконується успішно, OperationSet позначається як **Завершено**. Будь-які помилки відкочують транзакцію та пакет, а OperationSet позначається як **Невдало**.

## <a name="performance-methodology"></a>Методологія продуктивності
Час виконання визначається як час від виклику до API **ExecuteOperationSetV1** і до того, як служба планування проектів не завершить записування до Dataverse. Усі операції виконуються загалом 2200 разів, і повідомляються показники P99 про вимірювання часу. Вимірюються операції із окремими записами та групові операції.

Для операції з одним записом OperationSet містить один запит. Для групових операцій він містить 20, 50 або 100 запитів. Розмір кожної групи повідомляється окремо.

Ці операції виконуються у розгортанні Project Operations Lite UR 15 у Північній Америці.

## <a name="results"></a>Результати
### <a name="create-operations"></a>Операції створення
#### <a name="single-record-create-operations"></a>Операції створення для окремих записів
У наведеній нижче таблиці показано час виконання для створення одного запису. Час вказано в секундах.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">Тип запису</th>
    <th class="tg-0lax" colspan="2">Час</th>
  </tr>
  <tr>
    <th class="tg-0lax">Обов’язкові поля</th>
    <th class="tg-0lax">Усі поля, що підтримуються</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Project</td>
    <td class="tg-0lax">2.5</td>
    <td class="tg-0lax">3.78</td>
  </tr>
  <tr>
    <td class="tg-0lax">Завдання</td>
    <td class="tg-0lax">8.82</td>
    <td class="tg-0lax">9.34</td>
  </tr>
  <tr>
    <td class="tg-0lax">Призначення</td>
    <td class="tg-0lax">9.19</td>
    <td class="tg-0lax">9.19</td>
  </tr>
  <tr>
    <td class="tg-0lax">Учасник робочої групи</td>
    <td class="tg-0lax">0.84</td>
    <td class="tg-0lax">4.2</td>
  </tr>
  <tr>
    <td class="tg-0lax">Залежність</td>
    <td class="tg-0lax">8.84</td>
    <td class="tg-0lax">8.84</td>
  </tr>
</tbody>
</table>

#### <a name="bulk-create-operations"></a>Групові операції створення
У наведеній нижче таблиці показано час виконання для створення багатьох записів. Зокрема, у корпорації Microsoft вимірювався час, необхідний для створення 20, 50 і 100 записів в одному набору операцій OperationSet. Час вказано в секундах.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="3">Тип запису</th>
    <th class="tg-0lax" colspan="6">Час</th>
  </tr>
  <tr>
    <th class="tg-0lax" colspan="2">20 записів</th>
    <th class="tg-0lax" colspan="2">50 записів</th>
    <th class="tg-0lax" colspan="2">100 записів</th>
  </tr>
  <tr>
    <th class="tg-0lax">Обов’язкові поля</th>
    <th class="tg-0lax">Усі поля, що підтримуються</th>
    <th class="tg-0lax">Обов’язкові поля</th>
    <th class="tg-0lax">Усі поля, що підтримуються</th>
    <th class="tg-0lax">Обов’язкові поля</th>
    <th class="tg-0lax">Усі поля, що підтримуються</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Завдання</td>
    <td class="tg-0lax">19.92</td>
    <td class="tg-0lax">38.35</td>
    <td class="tg-0lax">36.67</td>
    <td class="tg-0lax">99.13</td>
    <td class="tg-0lax">116.77</td>
    <td class="tg-0lax">174.06</td>
  </tr>
  <tr>
    <td class="tg-0lax">Призначення</td>
    <td class="tg-0lax">13.94</td>
    <td class="tg-0lax">13.94</td>
    <td class="tg-0lax">43.95</td>
    <td class="tg-0lax">43.95</td>
    <td class="tg-0lax">69.38</td>
    <td class="tg-0lax">69.38</td>
  </tr>
  <tr>
    <td class="tg-0lax">Залежність</td>
    <td class="tg-0lax">30.04</td>
    <td class="tg-0lax">30.04</td>
    <td class="tg-0lax">77.82</td>
    <td class="tg-0lax">77.82</td>
    <td class="tg-0lax">176.89</td>
    <td class="tg-0lax">176.89</td>
  </tr>
</tbody>
</table>

> [!NOTE] 
> Групові операції створення із сутностями **Проект** і **Учасник робочої групи** не внесені в цю таблицю, оскільки час виконання цих операції подібний до часу роботи API для створенні окремого запису, який викликається кілька разів. Ці API запускаються негайно в Dataverse.

На наведені нижче ілюстрації показано графік часу виконання для сутностей **Завдання**, **Призначення** та **Залежність** при створенні 20, 50 і 100 записів із використанням усіх полів, що підтримуються.

![Графік часу виконання для створення запису.](./media/create-record-execution-time.png)

### <a name="update-operations"></a>Операції оновлення
#### <a name="single-record-update-operations"></a>Операції оновлення для окремих записів
У наведеній нижче таблиці показано час виконання для оновлення одного запису. Час вказано в секундах.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">Тип запису</th>
    <th class="tg-0lax" colspan="2">Час</th>
  </tr>
  <tr>
    <th class="tg-0lax">Обов’язкові поля </th>
    <th class="tg-0lax">Усі поля, що підтримуються</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Project</td>
    <td class="tg-0lax">9.53</td>
    <td class="tg-0lax">13.91</td>
  </tr>
  <tr>
    <td class="tg-0lax">Завдання</td>
    <td class="tg-0lax">8.82</td>
    <td class="tg-0lax">9.91</td>
  </tr>
  <tr>
    <td class="tg-0lax">Учасник робочої групи</td>
    <td class="tg-0lax">9</td>
    <td class="tg-0lax">8.96</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> Операції оновлення для сутностей **Призначення ресурсів** і **Залежність завдань проекту** не підтримуються.

#### <a name="bulk-update-operations"></a>Групові операції оновлення
У наведеній нижче таблиці показано час виконання для оновлення багатьох записів. Зокрема, у корпорації Microsoft вимірювався час, необхідний для оновлення 20, 50 і 100 записів в одному набору операцій OperationSet. Час вказано в секундах.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="3">Тип запису</th>
    <th class="tg-0lax" colspan="6">Час</th>
  </tr>
  <tr>
    <th class="tg-0lax" colspan="2">20 записів</th>
    <th class="tg-0lax" colspan="2">50 записів</th>
    <th class="tg-0lax" colspan="2">100 записів</th>
  </tr>
  <tr>
    <th class="tg-0lax">Обов’язкові поля</th>
    <th class="tg-0lax">Усі поля, що підтримуються</th>
    <th class="tg-0lax">Обов’язкові поля</th>
    <th class="tg-0lax">Усі поля, що підтримуються</th>
    <th class="tg-0lax">Обов’язкові поля</th>
    <th class="tg-0lax">Усі поля, що підтримуються</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Завдання</td>
    <td class="tg-0lax">8.91</td>
    <td class="tg-0lax">38.71</td>
    <td class="tg-0lax">20.92</td>
    <td class="tg-0lax">87.13</td>
    <td class="tg-0lax">36.68</td>
    <td class="tg-0lax">190.34</td>
  </tr>
  <tr>
    <td class="tg-0lax">Учасник робочої групи</td>
    <td class="tg-0lax">20.52</td>
    <td class="tg-0lax">26.06</td>
    <td class="tg-0lax">41.93</td>
    <td class="tg-0lax">44.51</td>
    <td class="tg-0lax">38.63</td>
    <td class="tg-0lax">66.53</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> Операції оновлення для сутностей **Призначення ресурсів** і **Залежність завдань проекту** не підтримуються.

На наведені нижче ілюстрації показано графік часу виконання для сутностей Завдання і Учасник робочої групи при оновленні 20, 50 і 100 записів із використанням усіх полів, що підтримуються.

![Графік часу виконання для оновлення запису.](./media/update-record-execution-time.png)

### <a name="delete-operations"></a>Операції видалення
#### <a name="single-record-delete-operations"></a>Операції видалення для окремих записів
У наведеній нижче таблиці показано час виконання для видалення одного запису. Час вказано в секундах.

| Тип запису | Час  |
|-------------|-------|
| Завдання        | 20.12 |
| Призначення  | 10.86 |
| Учасник робочої групи | 12.52 |
| Залежність  | 20.89 |

> [!NOTE]
> Операції видалення для сутності **Проект** не підтримуються.

#### <a name="bulk-delete-operations"></a>Операції групового видалення
У наведеній нижче таблиці показано час виконання для видалення багатьох записів. Зокрема, у корпорації Microsoft вимірювався час, необхідний для видалення 20, 50 і 100 записів в одному набору операцій OperationSet. Час вказано в секундах.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">Тип запису</th>
    <th class="tg-0lax" colspan="3">Час</th>
  </tr>
  <tr>
    <th class="tg-0lax">20 записів</th>
    <th class="tg-0lax">50 записів</th>
    <th class="tg-0lax">100 записів</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Завдання</td>
    <td class="tg-0lax">20.91</td>
    <td class="tg-0lax">67.43</td>
    <td class="tg-0lax">71.96</td>
  </tr>
  <tr>
    <td class="tg-0lax">Призначення</td>
    <td class="tg-0lax">11.75</td>
    <td class="tg-0lax">25.79</td>
    <td class="tg-0lax">47.66</td>
  </tr>
  <tr>
    <td class="tg-0lax">Учасник робочої групи</td>
    <td class="tg-0lax">9.78</td>
    <td class="tg-0lax">39.73</td>
    <td class="tg-0lax">24.33</td>
  </tr>
  <tr>
    <td class="tg-0lax">Залежність</td>
    <td class="tg-0lax">24.61</td>
    <td class="tg-0lax">54.9</td>
    <td class="tg-0lax">109.16</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> Операції видалення для сутності **Проект** не підтримуються.

На наведені нижче ілюстрації показано графік часу виконання для сутностей **Завдання**, **Призначення**, **Учасник робочої групи** та **Залежність** при видаленні 20, 50 і 100 записів.

![Графік часу виконання для видалення запису.](./media/delete-record-execution-time.png)

## <a name="observations"></a>Спостереження
Для кожної операції із записом API **ExecuteOperationSet** потребує приблизно 800 мілісекунд, щоб надіслати запит до служби планування проектів. Після цього служба планування проектів витрачає приблизно п'ять секунд на обробку переданих даних та викликає Dataverse. Залишок часу виконання витрачається на виконання бізнес-логіки та записування даних до бази даних Dataverse.

При створенні, оновлення або видаленні 100 записів API **ExecuteOperationSet** витрачає приблизно при секунди, щоб надіслати запит до служби планування проектів. Після цього служба планування проектів витрачає приблизно п'ять секунд на обробку запитів та викликає Dataverse. Групові операції мають сплатити **податок служби планування проектів** одноразово для усіх записів в наборі OperationSet. Отже, групові операції мають значно менший середній час виконання, ніж операції з окремим записом.

## <a name="scenarios"></a>Сценарії
У нижченаведеній таблиці перелічені часи виконання при використання API планування проектів для виконання деяких сценаріїв. Час вказано в секундах.

| Сценарій                                                                   | Час  |
|----------------------------------------------------------------------------|-------|
| Створіть проект, який має 40 завдань.                                      | 36.01 |
| Створіть проект, який має 40 завдань і 20 залежностей.                  | 38.11 |
| Створіть проект, який має 40 завдань і 30 призначень.                   | 60.17 |
| Створіть проект, який має 40 завдань, 20 залежностей і 30 призначень. | 60.27 |

## <a name="best-practices"></a>Рекомендації
Залежно від сценарію, що передував, API працює краще за зазначених нижче умов.

  - Згрупуйте якомога більше операцій разом. Середній час виконання групових операцій є кращим за середній час виконання операцій з одним записом. Що менша кількість використовуваних наборів операцій OperationSet, то меншим буде середній час виконання.
  - Указуйте лише мінімум атрибутів, необхідний для успішного виконання потрібного сценарію. Ретельно добирайте типи не-обов'язкових полів, включених до запиту OperationSet. Поля, які містять зовнішні ключі або поля зведення, негативно впливають на продуктивність.
