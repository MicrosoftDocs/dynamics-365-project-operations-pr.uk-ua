---
title: Налаштуйте автоматичне створення рахунків
description: У цій темі викладаються відомості про налаштування й настроювання автоматичного створення рахунків.
author: rumant
ms.date: 04/05/2021
ms.topic: article
ms.reviewer: johnmichalak
ms.author: rumant
ms.openlocfilehash: 027cc711d53c7dd8512e6ef416b54e320357dd26
ms.sourcegitcommit: c0792bd65d92db25e0e8864879a19c4b93efb10c
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 04/14/2022
ms.locfileid: "8584115"
---
# <a name="set-up-automatic-invoice-creation"></a>Налаштуйте автоматичне створення рахунків 
 
_**Застосовується до:** Легке розгортання - виставлення попередніх рахунків, Project Operations для сценаріїв на основі ресурсів і відсутності запасів_

У Dynamics 365 Project Operations ви можете налаштувати автоматичне створення рахунків. Система створює чернетки рахунків-проформ, спираючись на розклад виставлення рахунків для кожного сервісного договору проекту та сервісної роботи за договором. Розклади виставлення рахунків-фактур налаштовуються на рівні сервісної роботи за договором. Кожна позиція у сервісному договорі може мати окремий розклад виставлення рахунків-фактур, або ж для кожної позиції сервісного договору може зазначатися однаковий розклад.

При створенні рахунка-фактури система завжди створює для сервісного договору щонайменше один рахунок-фактуру. У деяких випадках може створюватись декілька рахунків-фактур. Наприклад, якщо сервісний договір передбачає кілька клієнтів, для сервісного договору проекту створюватиметься така ж кількість рахунків-фактур, скільки у ньому існує клієнтів із оплачуваними транзакціями, для яких необхідно створити рахунок-фактуру.

## <a name="understand-how-transactions-are-included-on-an-invoice"></a>Дізнайтеся, як транзакції вносяться до рахунків-фактур. 

Іноді кожна сервісна робота за договором на основі проекту визначає окремий розклад виставлення рахунків-фактур. Наприклад, послуги з реалізації контракту Adatum передбачають перелічені нижче сервісні роботи за договором.

- Робота над створенням працюючого зразка, котра має фіксовану ціну та два проміжних етапи, створених вручну.
- Робота із запровадження, що включає Час, і для неї потрібно виставляти рахунки тиждень через тиждень по понеділках.
- Понесені витрати, рахунки за які слід виставляти у перший понеділок кожного місяця.

Розклади виставлення рахунків-фактур, визначені для кожної з цих двох позицій, виглядають, як показано у таблиці нижче.

| Сервісна робота за договором | Дата виставлення рахунка | Дата переривання транзакції | Дата проміжного етапу | Сума на проміжному етапі |
| --- | --- | --- | --- | --- |
| Робота зі створення працюючого зразка | 5 жовтня, понеділок | - | 5 жовтня, понеділок | 5000 USD |
| - | Вівторок, 3 листопада | - | Вівторок, 3 листопада | 12,000 USD |
| Робота із запровадження | 5 жовтня, понеділок | 4 жовтня, неділя | - | - |
| - | 19 жовтня, понеділок | 18 жовтня, неділя | - | - |
| - | 2 листопада, понеділок | 1 листопада, неділя | - | - |
| - | 16 листопада, понеділок | 15 листопада, неділя | - | - |
| Понесені витрати | 5 жовтня, понеділок | 4 жовтня, неділя | - | - |
| - | 2 листопада, понеділок | 1 листопада, неділя | - | - |

У цьому прикладі під час кожного виконання автоматичного виставлення рахунків-фактур виконуються перелічені нижче події.

- **4 жовтня або будь-коли раніше**: жоден рахунок-фактура не створюється для цього сервісного договору, оскільки у таблиці **Розклад виставлення рахунків-фактур** для кожної з цих сервісних робіт за договором не зазначено неділю, 4 жовтня, в якості дати виставлення рахунка-фактури.
- **5 жовтня, понеділок**: створюється один рахунок-фактура для:

    - Роботи зі створення працюючого зразка, яка включає в себе проміжний етап, якщо він позначений як **Готово до виставлення рахунку-фактури**.
    - Роботи із впровадження, яка включає в себе всі транзакції часу, створені до дати відсікання транзакцій, 4 жовтня (неділя), позначені як **Готово до виставлення рахунку-фактури**.
    - Понесених витрат, які включають в себе всі транзакції витрат, створені до дати відсікання транзакцій, 4 жовтня (неділя), позначені як **Готово до виставлення рахунку-фактури**.
  
- **6 жовтня або будь-коли раніше 19 жовтня**: жоден рахунок-фактура не створюється для цього сервісного договору, оскільки у таблиці **Розклад виставлення рахунків-фактур** для кожної з цих сервісних робіт за договором не зазначено 6 жовтня або жодну іншу дату раніше 19 жовтня в якості дати виставлення рахунка-фактури.
- **19 жовтня, понеділок**: один рахунок-фактура створюється для роботи із впровадження, яка включає в себе всі транзакції часу, створені до дати відсікання транзакцій, 18 жовтня (неділя), позначені як **Готово до виставлення рахунку-фактури**.
- **2 листопада, понеділок**: створюється один рахунок-фактура для:

    - Роботи із впровадження, яка включає в себе всі транзакції часу, створені до дати відсікання транзакцій, 1 листопада (неділя), позначені як **Готово до виставлення рахунку-фактури**.
    - Понесених витрат, які включають в себе всі транзакції витрат, створені до дати відсікання транзакцій, 1 листопада (неділя), позначені як **Готово до виставлення рахунку-фактури**.

- **3 листопада, вівторок**: один рахунок-фактура створюється для роботи зі створення робочого зразка, яка включає в себе проміжний етап із сумою 12000 доларів США, якщо його позначено як **Готово до виставлення рахунку-фактури**.

## <a name="configure-automatic-invoicing"></a>Налаштування автоматичного виставлення рахунків-фактур

Виконайте наведені нижче кроки для налаштування автоматизованого виконання виставлення рахунків-фактур.

1. У програмі **Project Operations** відкрийте **Параметри** > **Настроювання повторюваного рахунка-фактури**.
2. Створіть пакетну роботу і назвіть її **Створення рахунків-фактур Project Operations**. Ім'я пакетного завдання має містити слова «Створення рахунків-фактур».
3. У полі **Тип завдання** виберіть параметр **Немає**. За замовчуванням поля **Щоденна частота** і **Активовано** мають значення **Так**.
4. Виберіть **Запустити робочий цикл**. У діалоговому вікні **Пошук записів** відображаються три робочі цикли.

- ProcessRunCaller
- ProcessRunner
- UpdateRoleUtilization

5. Виберіть **ProcessRunCaller**, а потім натисніть **Додати**.
6. У подальшому діалоговому вікні натисніть кнопку **ОК**. Робочий цикл **Сплячий режим** супроводжується робочим циклом **Процес**. 

> [!NOTE]
> Також можна вибрати **ProcessRunner** у кроці 5. Потім під час вибору **ОК** робочий цикл **Процес** відстежується робочим циклом **Сплячий режим**.

Робочі цикли **ProcessRunCaller** та **ProcessRunner** створюють рахунки. **ProcessRunCaller** викликає **ProcessRunner**. **ProcessRunner** — це робочий цикл, який фактично створює рахунки-фактури. Робочий цикл рухається через всі позиції сервісного договору, для яких потрібно створити рахунки-фактури, і створює рахунки-фактури для цих позицій. Для визначення сервісних робіт за договором, для яких мають бути створені рахунки-фактури, завдання буде дивитися на дату створення рахунка для сервісних робіт за договором. Якщо сервісна робота за договором, що належить до одного сервісного договору, має однакову дату виставлення рахунка-фактури, транзакції об'єднуються в один рахунок-фактуру з двома позиціями рахунка. Якщо транзакції для створення рахунків-фактур відсутні, завдання пропускає створення рахунка-фактури.

Після завершення обробки **ProcessRunner** програма викликає **ProcessRunCaller**, забезпечує час завершення і закривається. Після цього **ProcessRunCaller** запускає таймер на 24 години від указаного часу завершення. Після завершення таймера **ProcessRunCaller** закривається.

Завдання пакетної обробки для створення рахунків-фактур — це повторюване завдання. Якщо запустити цей пакетний процес багато разів, буде створено кілька екземплярів завдання, і виникнуть помилки. Тому процес пакетної обробки слід запустити лише один раз і перезапустити його, лише якщо він припинить роботу.

> [!NOTE]
> Пакетне виставлення рахунків-фактур у Project Operations запускається лише для сервісних робіт за договором проекту, налаштованих у розкладі виставлення рахунків-фактур. Для способу виставлення рахунків за сервісну роботу за договором із фіксованою ціною мають бути налаштовані на основні етапи. Для сервісної роботи за договором в рамках проекту з методом виставлення рахунків за час та матеріали буде потрібно налаштувати розклад виставлення рахунків на основі дати.


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
