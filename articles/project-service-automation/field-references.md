---
title: Додавання настроюваних полів до цінових і транзакційних сутностей
description: У цьому розділі наведено відомості про додавання настроюваних полів до цінових параметрів і транзакційних сутностей.
author: Rumant
manager: kfend
ms.custom:
- dyn365-projectservice
ms.date: 11/26/2018
ms.topic: article
ms.prod: Project Service
ms.service: business-applications
ms.assetid: 1d6e996b-dcf2-473f-b642-edd33d8d6d4e
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
ms.openlocfilehash: 95cea2c5d499335c24d31b725ed68901808ee084
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: uk-UA
ms.lasthandoff: 03/24/2020
ms.locfileid: "3756775"
---
# <a name="add-custom-fields-to-price-setup-and-transactional-entities"></a>Додавання настроюваних полів до цінових і транзакційних сутностей 
У цьому розділі передбачається, що ви завершили процедури в розділі, [Створення настроюваних полів і сутностей](create-custom-fields-entities.md). Якщо ви ще не виконали ці процедури, поверніться назад і завершіть їх, а потім поверніться до цього розділу. 

У цьому розділі процедура покаже, як додати потрібні настроювані поля до сутностей і елементів інтерфейсу користувача, наприклад форм та подань.

## <a name="add-custom-pricing-dimension-fields"></a>Додавання настроюваних полів критеріїв ціноутворення 
Після створення настроюваних полів і сутностей, наступний крок полягає в тому, щоб настроїти ціну та транзакційні сутності, щоб вони враховували будь-яких настроювані сутності або набори параметрів шляхом створення полів з посиланнями. Залежно від того, чи містить список критеріїв ціноутворення критерії набору параметрів або критерії сутності, чи обох одразу, виконайте лише кроки в **Настроювані критерії ціни на основі набору параметрів** або **Настроювані критерії ціни на основі сутності**, або в обох відповідно.

### <a name="option-set-based-custom-pricing-dimensions"></a>Настроювані критерії ціни на основі набору параметрів
Якщо настроювання ціни відбувається за критеріями на основі набору параметрів, додайте його як поле для ключових сутностей служби Project Service. У наведеній нижче процедурі **Місце роботи ресурсу** та **Робочий час ресурсу** використовуються як критерії ціноутворення на основі набору параметрів. Спочатку ці поля потрібно додавати як поля до сутностей ціноутворення, **Ціна ролі** та **Ціна ролі з націнкою**.

1. У Project Service Automation (PSA) клацніть **Налаштування** > **Рішення**, а потім двічі клацніть **\<ім'я організації > критерії ціноутворення**. 
2. У провіднику рішень на лівій навігаційній панелі виберіть **Сутності > Ціна ролі**.
3. Розгорніть сутність **Ціна ролі** й виберіть пункт **Поля**.
4. Натисніть кнопку **Створити**, щоб створити нове поле під посадою **Місце роботи ресурсу** та виберіть **Набір параметрів** як тип поля. 
5. Виберіть **Використовувати наявний набір параметрів**, виберіть набір параметрів **Місце роботи ресурсу**, а потім натисніть кнопку **Зберегти**.
6. Повторіть кроки 1-5, щоб додати це поле до **сутності Ціна ролі з націнкою**. 
7. Повторіть кроки 1-5 для набору параметрів **Робочий час ресурсу**.

> [!IMPORTANT]
> У разі додавання поля до кількох сутностей, використовуйте одне й те саме ім'я поля в усіх сутностях. 

> ![Додавання місця роботи ресурсу до ціни ролі](media/RWL-Field.png)

У фазі збуту та оцінки проекту, прогнозування обсягу робіт, необхідних для завершення роботи **Локально** та **На місці**, в **Робочі години** та **Понаднормові години** використовуються для прогнозування вартості цінової пропозиції/проекту. Поля **Місце роботи ресурсу** і **Робочий час ресурсу** буде додано до сутностей прогнозу, **Відомості про позицію цінової пропозиції**, **Відомості про сервісну роботу за договором** **Учасник робочої групи проекту** та **Позиція оцінки**.

1. У програмі PSA натисніть **Настройки** > **Рішення**, а потім двічі клацніть **\<ім'я організації > критерії ціноутворення**. 
2. У провіднику рішень на лівій навігаційній панелі виберіть **Сутності > Відомості про позицію цінової пропозиції**.
3. Розгорніть сутність **Відомості про позицію цінової пропозиції** і виберіть **Поля**.
4. Натисніть кнопку **Створити**, щоб створити нове поле під посадою **Місце роботи ресурсу** та виберіть **Набір параметрів** як тип поля. 
5. Виберіть **Використати наявний набір параметрів** та **Місце роботи ресурсу**, а потім натисніть кнопку **Зберегти**.
6. Повторіть кроки 1-5, щоб додати це поле до сутностей **Відомостей про сервісну роботу за договором**, **Учасник робочої групи** та **Позиція оцінки**.
7. Повторіть кроки 1-6 для набору параметрів **Робочий час ресурсу**. 

> ![Додавання розташування ресурсу до позиції оцінки](media/RWL-Default-Value.png)


Для доставки та виставлення рахунка завершена робота повинна мати точно обчислену ціну, виберіть, чи вона була виконана **Локально** або **На місці**, і чи була вона завершена в **Робочі години** або **Понаднормові** у фактичних даних проекту. Поля **Місце роботи ресурсу** та **Робочий час ресурсу** слід додати до сутностей **Запис часу**, **Фактично**, **Відомості про позицію рахунка** та **Рядок у журналі**.

1. У програмі PSA натисніть **Настройки** > **Рішення**, а потім двічі клацніть **\<ім'я організації > критерії ціноутворення**.
2. У провіднику рішень на лівій навігаційній панелі виберіть **Сутності > Запис часу**.
3. Розгорніть сутність **Відомості про позицію цінової пропозиції** та виберіть **Поля**.
4. Натисніть кнопку **Створити**, щоб створити нове поле під посадою **Місце роботи ресурсу** та виберіть **Набір параметрів** як тип поля. 
5. Виберіть **Використовувати наявний набір параметрів**, виберіть набір параметрів **Місце роботи ресурсу**, а потім натисніть кнопку **Зберегти**.
6. Повторіть кроки 1-5, щоб додати це поле до сутностей **Фактично** **Відомості про позицію рахунка** та **Рядок у журналі**.
7. Повторіть кроки 1-6 для набору параметрів **Робочий час ресурсу**. 

> ![Додавання місця роботи ресурсу до запису часу](media/RWL-time-entry.png)

Це завершує зміни схеми, необхідної для настроюваних критеріїв на основі набору параметрів.

## <a name="entity-based-custom-pricing-dimensions"></a>Настроювані критерії ціноутворення на основі сутностей

Коли настроюваний критерій ціноутворення — це сутність, ви додаєте зв'язки 1: N між сутностями критеріїв і ключовими сутностями Project Service. Використання прикладу типової назви з вище, доцільно розраховувати, що кожному працівнику буде присвоєно стандартну назву. У результаті, вам знадобиться зв’язок 1:N зі стандартною посадою для доступного ресурсу або зв'язок N:1, якщо його було створено з відповідного доступного ресурсу для стандартної назви.

1. У програмі PSA натисніть **Настройки** > **Рішення**, а потім двічі клацніть **\<ім'я організації > критерії ціноутворення**. 
2. У провіднику рішень на лівій навігаційній панелі виберіть **Сутності > Стандартна посада**.
3. Розгорніть сутність **Стандартна посада** та виберіть **Зв’язок 1:N**.
4. Натисніть кнопку **Створити**, щоб створити новий зв’язок 1:N, який називається **Стандартна посада для доступного ресурсу**. Введіть необхідні відомості, а потім натисніть **Зберегти**.

> ![Додавання стандартної як еталонного поля для доступного для бронювання ресурсу](media/ST-BR.png)

Крім того, можна додати стандартні посади для сутностей ціноутворення Project Service **Ціна ролі** та **Ціна ролі з націнкою**. Це також виконується за допомогою зв'язків 1:N між **Стандартною посадою** та сутностями **Ціна ролі**, **Стандартна посада** та **Ціна ролі з націнкою**.

1. У провіднику рішень на лівій навігаційній панелі виберіть **Сутності > Стандартна посада**.
2. Розгорніть сутність **Стандартна посада** та виберіть **Зв’язок 1:N**.
3. Натисніть кнопку **Створити**, щоб створити новий зв’язок 1:N, який називається **Стандартна посада для ціни ролі**. Введіть необхідні відомості, а потім натисніть **Зберегти**.
4. Повторіть кроки 1-4, щоб створити зв'язки 1:N між сутностями **Стандартна посада** та **Ціна ролі з націнкою**.

На етапах продажу та оцінки для проекту, для розрахунку цінової пропозиції/проекту, для кожної стандартної посади потрібно оцінити обсяги роботи. Це означає, що для кожної з цих сутностей оцінювання в Project Service потрібні зв'язки 1:N від стандартної посади. 

- **Відомості про позицію в ціновій пропозиції**
- **Відомості про сервісну роботу за проектним договором**
- **Учасник робочої групи проекту**
- **Позиція прогнозу**

5. Повторіть кроки 1-5, щоб створити зв'язок 1:N із **Стандартної посади** до **Відомостей про позицію цінової пропозиції**, **Відомостей про сервісну роботу за договором**, **Учасника робочої групи** та **Позиції оцінки**.

> ![Додавання стандартної посади як поля посилання до позиції оцінки](media/ST-Estimate-Line.png)

У фазах доставки та виставлення рахунка робота, виконана кожною стандартною посадою, має мати точну ціну у фактичних даних проекту. Це означає, що необхідно мати значення зв’язків 1:N від **Стандартної посади** до сутностей **Запис часу**, **Фактично**, **Відомості про позицію рахунка** та **Рядок у журналі**.

6. Повторіть кроки 1-6, щоб створити зв'язки 1:N від **Стандартної посади** до сутностей **Запису часу** **Фактично**, **Відомості про позицію рахунка** та **Рядок у журналі**.

> ![Додавання стандартної посади як поля для посилання на запис часу](media/ST-Mapping.png)

### <a name="set-up-dimension-value-defaulting-using-the-mappings-features-of-the-platform"></a>Настроювання повернення стандартного значення критерію за допомогою функцій зіставлення платформи
Для запису часу буде корисно мати стандартні системні посади в записі часу від доступного ресурсу, який записує час. Виконайте наведені нижче кроки, щоб додати зіставлення полів у зв’язок 1:N між**Доступним для бронювання ресурсом** та **Записом часу**.

1. У провіднику рішень на лівій навігаційній панелі виберіть **Сутності > Стандартна посада**.
2. Розгорніть сутність **Стандартна посада** та виберіть **Зв’язок 1:N**.
3. Двічі клацніть **Доступний ресурс до запису часу**. На сторінці **Зв'язки** натисніть **Використовувати зіставлення полів**. 
4. Натисніть **Створити**, щоб створити нове зіставлення поля між **Стандартною посадою** в сутності **Доступний для бронювання ресурс** для поля з посиланням **Стандартна посада** в сутності **Запис часу**. 

> ![Настройте зіставлення полів, щоб скинути до звичайних значень "Стандартну посаду" від доступного ресурсу на запис часу](media/ST-Mapping2.png)


Це завершує змінення схеми, необхідної для настроюваних критеріїв на основі сутностей.

##  <a name="add-custom-fields-to-forms-views-and-business-rules"></a>Додавання настроюваних полів до форм, подань та бізнес-правил

Після запровадження всіх необхідних змін у схемі, наступний крок полягає в тому, щоб зробити поля видимими в інтерфейсі, додаючи поля до форм і подань.

1. Відкрийте форму або подання. В області переходів праворуч виберіть поле і перетягніть його до полотна форми. 
2. У разі редагування подання скористайтеся панеллю переходів праворуч, клацніть **Додати поля** та у діалоговому вікні **Список полів** виберіть потрібні поля та натисніть кнопку **ОК**.

У наведеній нижче таблиці подано вичерпний список готових форм і подань, вказаними за сутностями, які необхідно оновити новими полями. За наявності додаткових подань або форм у настройках у цих сутностях додайте нові поля до них також.

| Сутність Project Service        | Форми, яким потрібні нові поля   |Подання, які потребують нового поля      |
| ------------------------------|---------------------------------|----------------------------------|
|  Розцінки ролі|• Відомості |• Активні ціни на категорії ресурсів<br> • По’язане подання цін на категорії ресурсів|
|  Націнка на розцінки ролі|• Відомості|• Активні націнки на розцінки ролі<br>• Пов’язане подання націнки на розцінки ролі|
|  Відомості про позицію цінової пропозиції|• Відомості про проект<br>• Швидке створення проекту|• Активні відомості про позиції цінової пропозиції<br>• Об’єднані відомості про позиції цінової пропозиції<br>• По’язане подання відомостей про позиції цінової пропозиції|
|  Відомості про сервісну роботу за проектним договором|• Відомості про проект<br>• Швидке створення проекту|• Об’єднані відомості про сервісну роботу за договором<br>• Активні відомості про сервісну роботу за договором<br>• Зв’язане подання відомостей про сервісну роботу за договором|
|  Учасник робочої групи проекту|• Відомості<br>• Створити форму|• Активні учасники робочої групи проекту<br>• Учасники робочої групи проекту<br>• По’язане подання учасників робочої групи проекту|
|  Запис часу|• Відомості<br>• Створити запис часу|• Мої записи часу за датою<br>• Мої записи часу для цього тижня<br>• Записи часу для затвердження|
|  Рядок у журналі|• Відомості<br>• Швидке створення|• Активні рядки в журналі<br>• Пов’язане подання рядків у журналі|
|  Відомості про позиції рахунка|• Відомості<br>• Швидке створення|• Активні відомості про позиції рахунка<br>• Оплачувані транзакції за рахунками<br>• Додаткові транзакції за рахунками<br>• По’язане подання відомостей про позиції рахунка<br>• Неоплачувані транзакції за рахунками|
|  Фактично |• Відомості<br>• Активні фактичні дані|• Пов'язане подання дії|

Настроювані поля також можуть бути додані до бізнес-правил залежно від того, що було визначено. Приклад одного готового бізнес-правила **Дозвіл на редагування запису часу залежно від стану**. Це правило визначає, які поля потрібно блокувати, коли запис часу належить має статус, при якому не можна редагувати, наприклад **Затверджено**. Додайте поля до цього бізнес-правила, щоб ці поля були заблоковані для редагування, коли запис часу перебуває у стані іншому, ніж **Чернетка** або **Повернуто**.
