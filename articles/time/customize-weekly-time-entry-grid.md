---
title: Подовження записів часу
description: У цій статті наведено відомості про те, як розробники можуть розширити елемент керування введенням часу.
author: stsporen
ms.date: 01/27/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: stsporen
ms.openlocfilehash: 7ed501af3fb2059ab3c3ab6f6c957fe518595d55
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 06/03/2022
ms.locfileid: "8914795"
---
# <a name="extending-time-entries"></a>Подовження записів часу

_**Застосовується до:** Project Operations для сценаріїв на основі ресурсів і відсутності запасів, полегшене розгортання: угоди та виставлення рахунків-проформ_

Dynamics 365 Project Operations включає настроюваний елемент керування часом із можливістю розширення. Цей елемент керування має перелічені нижче функції.

- Введення часу горизонтально в межах тижня
- Підсумки за днем, рядком або тижнем
- Копіювання рядків або тижнів
- Запис часу, використовуючи ГГ:хх або ГГ.гг (автоматично перетворюється на ГГ.гг)
- Імпорт з призначень, резервувань або зустрічей

Подовження записів часу можливе в двох областях:
- [Додавання настроюваних записів часу для власного використання](#add)
- [Налаштування елемента керування щотижневим введенням часу](#customize)

## <a name="add-custom-time-entries-for-your-own-use"></a><a name="add"></a>Додавання настроюваних записів часу для власного використання

Записи часу є основною сутністю, яка використовується в різних сценаріях. У хвилі 1 за квітень 2020 року було введено базове рішення TESA. TESA вводить сутність **Параметри** та нову роль безпеки **Користувач записів часу**. Також було додано нові поля, **msdyn_start** та **msdyn_end**, які мають пряме відношення до **msdyn_duration**. Нова сутність, роль безпеки та нові поля дозволяють більш універсально підходити до роботи із часом для кількох продуктів.


### <a name="time-source-entity"></a>Сутність «Джерело часу»
| Поле | Опис | 
|-------|------------|
| Ім'я  | Ім'я запису Джерело часу, який використовується як значення вибору при створенні записів часу. |
| Джерело часу за замовчуванням [Джерело часу: isdefault] | За замовчуванням лише одне джерело часу може бути позначено як джерело часу за замовчуванням. Завдяки цьому записи можуть за замовчуванням використовувати певне джерело часу, якщо джерела не вказано. |
|Тип джерела часу [Джерело часу: sourcetype] | Тип джерела — це параметр (тип джерела запису часу), який дає змогу об'єднувати джерело часу та програму. Корпорація Microsoft резервує значення, більші за 190 000 000.|


### <a name="time-entries-and-the-time-source-entity"></a>Записи часу та сутність Джерело часу
Кожен запис часу зв'язується із записом джерела часу. Цей запис визначає, як і які саме програми мають обробляти запис часу.

Записи часу завжди є одним безперервним блоком часу із пов'язаним початком, кінцем та тривалістю.

Логіка автоматично оновлюватиме запис запису часу в перелічених нижче ситуаціях.

- Якщо введено значення двох з трьох полів, вказаних нижче, значення третього обчислюється автоматично. 

    - **msdyn_start**
    - **msdyn_end**
    - **msdyn_duration**

- Поля **msdyn_start** та **msdyn_end** враховують часовий пояс.
- Записи часу, створені із зазначенням лише **msdyn_date** та **msdyn_duration**, починатимуться опівночі. Поля **msdyn_start** та **msdyn_end** оновляться відповідно.

#### <a name="time-entry-types"></a>Типи записів часу

Записи сутності Запис часу мають пов'язаний тип, який визначає поведінку в потоці надсилання для зв'язаної програми.

|Заголовок | Значення|
|-----|-----|
|На перерві   |192,355,000|
|Подорожі | 192,355,001|
|Понаднормово   | 192,354,320|
|Робота   | 192,350,000|
|Відгул    | 192,350,001|
|Відпустка   | 192,350,002|


## <a name="customize-the-weekly-time-entry-control"></a><a name="customize"></a>Налаштування елемента керування щотижневим введенням часу
Розробники можуть додавати додаткові поля підстановки та інші поля до інших сутностей, а також впроваджувати настроювані бізнес-правила для підтримки своїх бізнес-сценаріїв.

### <a name="add-custom-fields-with-lookups-to-other-entities"></a>Додавання настроюваних полів із підстановками до інших сутностей
Існує три основні кроки, щоб додати настроюване поле до сітки щотижневого запису часу.

1. Додайте настроюване поле до діалогового вікна **Швидке створення**.
2. Настройте сітку, щоб показати настроюване поле.
3. Додайте настроюване поле до сторінки **Редагувати рядок** або **Редагувати запис часу** за необхідності.

Переконайтеся також, що в новому полі є необхідні перевірки на сторінці **Редагувати рядок** або **Редагувати запис часу**. У межах цього завдання заблокуйте поля, залежно від стану запису часу.

Якщо додати настроюване поле до сітки **Запис часу**, а потім створити записи часу безпосередньо в сітці, для цих записів автоматично встановлюється настроюване поле таким чином, щоб воно відповідало рядку. 

### <a name="add-the-custom-field-to-the-quick-create-dialog-box"></a>Додавання настроюваного поля до діалогового вікна «Швидке створення»
Додайте настроюване поле до діалогового вікна **Швидке створення: створити запис часу**. Тоді користувачі зможуть вводити значення під час додавання записів часу, вибравши **Створити**.

### <a name="configure-the-grid-to-show-the-custom-field"></a>Настройте сітку, щоб показати настроюване поле
Існує два способи додавання настроюваного поля до сітки **Тижневий запис часу**.

- Налаштуйте подання **Мої тижневі записи часу** та додайте до нього настроюване поле. Можна визначити розташування та розмір настроюваного поля в сітці, редагуючи властивості в поданні.
- Створіть нове подання для настроюваного запису часу та задати його як подання за замовчуванням. Це подання має містити поля **Опис** та **Зовнішні примітки**, а також стовпці, які потрібно додати до сітки. Можна визначити позицію, розмір і порядок сортування за замовчуванням у сітці, редагуючи ці властивості в поданні. Далі змініть настроюваний елемент керування для цього подання, щоб він став елементом керування **Сітка для введення часу**. Додайте цей елемент керування до подання та виберіть його для елементів **Сайт**, **Телефон** і **Планшет**. Потім налаштуйте параметри для сітки **Тижневий запис часу**. Встановіть для поля **Дата початку** значення **msdyn\_date**, для поля **Тривалість** значення **msdyn\_duration**, а для поля **Стан** значення **msdyn\_entrystatus**. Для поля **Список станів лише для читання** встановлено значення **192350002 (Затверджено)**, **192350003 (Надіслано)** або **192350004 (Відкликання запитано)**.

### <a name="add-the-custom-field-to-the-appropriate-edit-page"></a>Додавання настроюваного поля до відповідної сторінки редагування
Сторінки, які використовуються для редагування запису часу або рядка записів часу, можна знайти в розділі **Форми**. Кнопка **Редагувати запис** у сітці відкриває сторінку **Редагувати запис**, а кнопка **Редагувати рядок** відкриває сторінку **Редагувати рядок**. Ці сторінки можна редагувати таким чином, щоб вони включали настроювані поля.

Обидва параметри видаляють деякі готові елемент фільтрації у сутностях **Проект** та **Завдання проекту**, щоб усі подання підстановки для сутностей були видимими. У полі відображаються лише відповідні подання підстановки.

Слід визначити відповідну сторінку для настроюваного поля. Скоріш за все, якщо поле було додано до сітки, його слід додати до **Редагувати рядок**, який використовується для полів, які застосовуються до цілого рядка записів часу. Якщо настроюване поле має унікальне значення в рядку щодня (наприклад, якщо це настроюване поле для часу завершення), його слід змінити на сторінці **Редагувати запис часу**.

Щоб додати настроюване поле до сторінка, перетягніть елемент **Поле** до відповідної позиції на сторінці, а потім налаштуйте його властивості.

### <a name="add-new-option-set-values"></a>Додайте новий набір параметрів
Щоб додати до готового поля значення набору параметрів, виконайте описані нижче дії.

1. Відкрийте сторінку редагування для поля, а потім в області **Тип** виберіть **Змінити** поряд з набором параметрів.
2. Додайте новий параметр, який має власний підпис і колір. Якщо потрібно додати новий стан запису часу, готове поле матиме назву **Стан запису**.

### <a name="designate-a-new-time-entry-status-as-read-only"></a>Призначення новому запису часу стану лише для читання
Щоб вказати статус нового запису часу як «тільки для читання», додайте нове значення запису часу до властивості **Список станів лише для читання**. Переконайтеся, що ви додали номер, а не надпис. Для рядків, які мають новий статус, змінювана частина сітки запису часу буде зараз заблокована. Щоб установити властивість **Список статусів лише для читання** по-різному для різних подань **Запис часу**, додайте сітку **Запис часу** в розділі подання **Настроювані елементи керування** та відповідно налаштуйте ці параметри.

Потім додайте бізнес-правила, щоб заблокувати всі поля на сторінках **Редагувати рядок** та **Редагувати запис час**. Щоб отримати доступ до бізнес-правил для цих сторінок, відкрийте редактор форм для кожної сторінки, а потім виберіть **Бізнес-правила**. Можна додати новий стан до умови в наявних бізнес-правилах або додати нове бізнес-правило для нового стану.

### <a name="add-custom-validation-rules"></a>Додавання настроюваних правил перевірки
Можна додати два типи правил перевірки для інтерфейсу сітки **Тижневий запис часу**:

- Бізнес-правила на стороні клієнта, які працюють на сторінках
- Перевірки компонентів plug-in на сервері, які застосовуються до всіх оновлень записів часу

#### <a name="client-side-business-rules"></a>Бізнес-правила на стороні клієнта
За допомогою бізнес-правил можна блокувати та розблоковувати поля, вводити значення за замовчуванням у полях, а також визначати перевірки, які потребують даних лише з поточного запису часу. Щоб отримати доступ до бізнес-правил для цієї сторінки, відкрийте редактор форм, а потім виберіть **Бізнес-правила**. Тоді можна змінити наявні бізнес-правила або додати нове бізнес-правило.

#### <a name="server-side-plug-in-validations"></a>Перевірка компонентів plug-in на сервері
Використовуйте перевірки компонента plug-in для будь-яких перевірок, які потребують більше контексту, ніж доступно в одному записі часу. Їх також слід використовувати для перевірок, які необхідно виконати під час виконання лінійних оновлень у сітці. Щоб виконати ці перевірки, створіть настроюваний компонент plug-in для сутності **Запис часу**.

### <a name="limits"></a>Обмеження
Наразі сітка **Запис часу** має граничне значення розміру 500 рядків. Якщо ви маєте більше ніж 500 рядків, рядки, що перевищують цю кількість, не відображатимуться. Це обмеження розміру збільшити не можна.

### <a name="copying-time-entries"></a>Копіювання записи часу
Використовуйте подання **Копіювати стовпці із записами часу**, щоб визначити список полів для копіювання при введенні часу. **Дата** й **Тривалість** є обов'язковими полями, їх не слід видаляти з подання.


[!INCLUDE[footer-include](../includes/footer-banner.md)]
