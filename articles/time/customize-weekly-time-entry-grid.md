---
title: Подовження записів часу
description: У цьому розділі наведено відомості про те, як розробники можуть розширити елемент керування введенням часу.
author: stsporen
manager: Annbe
ms.date: 10/08/2020
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: stsporen
ms.openlocfilehash: f446e24f3a61914a46a552fdc38b986d8b924747
ms.sourcegitcommit: fa32b1893286f20271fa4ec4be8fc68bd135f53c
ms.translationtype: HT
ms.contentlocale: uk-UA
ms.lasthandoff: 02/15/2021
ms.locfileid: "5277183"
---
# <a name="extending-time-entries"></a>Подовження записів часу

_**Застосовується до:** Project Operations для сценаріїв на основі ресурсів і відсутності запасів, полегшене розгортання: угоди та виставлення рахунків-проформ_

Dynamics 365 Project Operations включає настроюваний елемент керування часом із можливістю розширення. Цей елемент керування має перелічені нижче функції.

- Введення часу горизонтально в межах тижня
- Підсумки за днем, рядком або тижнем
- Копіювання рядків або тижнів
- Запис часу, використовуючи ГГ:хх або ГГ.гг (автоматично перетворюється на ГГ.гг)
- Імпорт з призначень, резервувань або зустрічей

Подовження записів часу можливе в двох областях:
- [Додавання настроюваних записів часу для власного використання](#add)
- [Налаштування елемента керування щотижневим введенням часу](#customize)

## <a name="add-custom-time-entries-for-your-own-use"></a><a name="add"></a>Додавання настроюваних записів часу для власного використання

Записи часу є основною сутністю, яка використовується в різних сценаріях. У хвилі 1 за квітень 2020 року було введено базове рішення TESA. TESA вводить сутність **Параметри** та нову роль безпеки **Користувач записів часу**. Також було додано нові поля, **msdyn_start** та **msdyn_end**, які мають пряме відношення до **msdyn_duration**. Нова сутність, роль безпеки та нові поля дозволяють більш універсально підходити до роботи із часом для кількох продуктів.


### <a name="time-source-entity"></a>Сутність «Джерело часу»
| Поле | Опис | 
|-------|------------|
| Ім'я  | Ім'я запису Джерело часу, який використовується як значення вибору при створенні записів часу. |
| Джерело часу за замовчуванням [Джерело часу: isdefault] | За замовчуванням лише одне джерело часу може бути позначено як джерело часу за замовчуванням. Завдяки цьому записи можуть за замовчуванням використовувати певне джерело часу, якщо джерела не вказано. |
|Тип джерела часу [Джерело часу: sourcetype] | Тип джерела — це параметр (тип джерела запису часу), який дає змогу об'єднувати джерело часу та програму. Корпорація Microsoft резервує значення, більші за 190 000 000.|


### <a name="time-entries-and-the-time-source-entity"></a>Записи часу та сутність Джерело часу
Кожен запис часу зв'язується із записом джерела часу. Цей запис визначає, як і які саме програми мають обробляти запис часу.

Записи часу завжди є одним безперервним блоком часу із пов'язаним початком, кінцем та тривалістю.

Логіка автоматично оновлюватиме запис запису часу в перелічених нижче ситуаціях.

- Якщо введено значення двох з трьох полів, вказаних нижче, значення третього обчислюється автоматично. 

    - **msdyn_start**
    - **msdyn_end**
    - **msdyn_duration**

- Ці поля, **msdyn_start** та **msdyn_end**, враховують часовий пояс.
- Записи часу, створені із зазначенням лише **msdyn_date** та **msdyn_duration**, починатимуться опівночі. Поля **msdyn_start** та **msdyn_end** оновляться відповідно.

#### <a name="time-entry-types"></a>Типи записів часу

Записи сутності Запис часу мають пов'язаний тип, який визначає поведінку в потоці надсилання для зв'язаної програми.

|Заголовок | Значення|
|-----|-----|
|На перерві   |192,355,000|
|Подорожі | 192,355,001|
|Понаднормово   | 192,354,320|
|Робота   | 192,350,000|
|Відгул    | 192,350,001|
|Відпустка   | 192,350,002|



## <a name="customize-the-weekly-time-entry-control"></a><a name="customize"></a>Налаштування елемента керування щотижневим введенням часу
Розробники можуть додавати додаткові поля підстановки та інші поля до інших сутностей, а також впроваджувати настроювані бізнес-правила для підтримки своїх бізнес-сценаріїв.

### <a name="add-custom-fields-with-lookups-to-other-entities"></a>Додавання настроюваних полів із підстановками до інших сутностей
Існує три основні кроки, щоб додати настроюване поле до сітки щотижневого запису часу.

1. Додайте настроюване поле до діалогового вікна швидкого створення.
2. Настройте сітку, щоб показати настроюване поле.
3. Додайте настроюване поле до потоку завдань редагування рядка або потоку завдань редагування клітинки.

Переконайтеся також, що в новому полі є необхідні перевірки в потоці завдань редагування рядка або клітинки. У межах цього кроку заблокуйте поля, залежно від стану запису часу.

### <a name="add-the-custom-field-to-the-quick-create-dialog-box"></a>Додайте настроюване поле до діалогового вікна швидкого створення
Додайте настроюване поле до діалогового вікна **Швидке створення запису часу**. Тоді під час додавання записів часу користувачі зможуть вводити значення, вибираючи **Створити**.

### <a name="configure-the-grid-to-show-the-custom-field"></a>Настройте сітку, щоб показати настроюване поле
Існує два способи додавання настроюваного поля до тижневої сітки записів часу.

  - Настроювання подання та додавання настроюваного поля
  - Створення нового настроюваного запису часу за замовчуванням 


#### <a name="customize-a-view-and-add-a-custom-field"></a>Настроювання подання та додавання настроюваного поля

Настройте подання **Мої тижневі записи часу** та додайте до нього настроюване поле. Можна вибрати розташування та розмір настроюваного поля в сітці, редагуючи властивості в поданні.

#### <a name="create-a-new-default-custom-time-entry"></a>Створення нового настроюваного запису часу за замовчуванням

Це подання має містити поля **Опис** та **Зовнішні примітки**, а також стовпці, які потрібно додати до сітки. 

1. Виберіть позицію, розмір і порядок сортування за замовчуванням у сітці, редагуючи ці властивості в поданні. 
2. Налаштуйте настроюваний елемент керування для цього подання, щоб він став елементом керування **Сітка для введення часу**. 
3. Додайте цей елемент керування до подання та виберіть його для веб-сайту, телефону та планшета. 
4. Налаштуйте параметри для тижневої сітки запису часу. 
5. Встановіть поле **Дата початку** у значення **msdyn_date**, поле **Тривалість** у значення **msdyn_duration**, а також поле **Стан** у значення **msdyn_entrystatus**. 
6. У поданні за замовчуванням для поля **Список станів лише для читання** встановлено значення **192350002,192350003,192350004**. Для поля **Потік завдань редагування рядка** встановлено значення **msdyn_timeentryrowedit**. Для поля **Потік завдань редагування клітинки** встановлено значення **msdyn_timeentryedit**. 
7. Ці поля можна настроїти, щоб додати або усунути стан лише для читання, або використати інший можливості на основі завдань (TBX) для редагування рядка або клітинки. Ці поля тепер прив’язано до статичного значення.


> [!NOTE] 
> Обидва параметри видалять деякі готові елемент фільтрації у сутностях **Проект** та **Завдання проекту**, щоб усі подання підстановки для сутностей були видимими. Станом одразу після установки у полі відображаються лише відповідні подання підстановки.

Визначте відповідний потік завдань для настроюваного поля. Якщо поле було додано до сітки, його слід додати до потоку завдань редагування рядка, який використовується для полів, що застосовуються до цілого рядка записів часу. Якщо настроюване поле має унікальне значення щодня, наприклад настроюване поле для **Часу завершення**, його слід змінити у потоці завдання редагування клітинки.

Щоб додати настроюване поле до потоку завдань, перетягніть елемент **Поле** до відповідної позиції на сторінці, а потім настройте властивості поля. Установіть параметр **Джерело** у значення **Запис часу** і настройте властивість **Поле даних** на настроюване поле. Властивість **Поля** визначає коротке ім'я на сторінці TBX. Виберіть **Застосувати**, щоб зберегти зміни в полі, а потім виберіть **Оновити**, щоб зберегти зміни на сторінці.

Для використання нової настроюваної сторінки TBX, створіть новий процес. Укажіть категорію для **Потік бізнес-процесу**, установіть сутність у **Запис часу** та встановіть тип бізнес-процесу у **Виконання процесу як потоку завдань**. У розділі **Властивості** властивість **Ім’я сторінки** має бути задано для відображення імені сторінки. Додайте всі відповідні поля до сторінки TBX. Збережіть та активуйте процес. Оновіть настроювану властивість елемента керування для відповідного потоку завдань, вказавши значення **Ім’я** у процесі.

### <a name="add-new-option-set-values"></a>Додайте новий набір параметрів
Щоб додати значення набору параметрів до готового поля, відкрийте сторінку редагування для поля, а потім в області **Тип** виберіть **Змінити** поряд з набором параметрів. Додайте новий параметр, який має власний підпис і колір. Якщо вам потрібно додати новий стан запису часу, готове поле називається **Стан запису**, а не **Стан**.

### <a name="designate-a-new-time-entry-status-as-read-only"></a>Призначення новому запису часу стану лише для читання
Щоб вказати статус нового запису часу як «тільки для читання», додайте нове значення запису часу до властивості **Список станів лише для читання**. Для рядків, які мають новий статус, змінювана частина сітки запису часу буде заблокована.
Потім додайте бізнес-правила, щоб заблокувати всі поля на сторінках TBX **Редагування рядка запису часу** та **Редагування запису часу**. Можна отримати доступ до бізнес-правил для цих сторінок, відкривши редактор потоку бізнес-процесу для сторінки, а потім вибравши **Бізнес-правила**. Можна додати новий стан до умови в наявних бізнес-правилах або додати нове бізнес-правило для нового стану.

### <a name="add-custom-validation-rules"></a>Додавання настроюваних правил перевірки
Існує два типи правил перевірки, які можна додати при роботі з сіткою тижневих записів часу.

- Клієнтські бізнес-правила, які працюють у діалогових вікнах швидкого створення та на сторінках TBX.
- Перевірки компонентів Plug-in на сервері, які застосовуються до всіх оновлень записів часу.

#### <a name="business-rules"></a>Бізнес-правила
За допомогою бізнес-правил можна блокувати та розблоковувати поля, вводити значення за замовчуванням у полях, а також визначати перевірки, які потребують даних лише з поточного запису часу. Можна отримати доступ до бізнес-правил для сторінок TBX, відкривши редактор потоку бізнес-процесів для сторінки, а потім вибравши **Бізнес-правила**. Тоді можна змінити наявні бізнес-правила або додати нове бізнес-правило. Щоб додати ще кілька настроюваних можливостей перевірки, можна використовувати бізнес-правило для виконання JavaScript.

#### <a name="plug-in-validations"></a>Перевірка компонента Plug-in
Використовуйте перевірки компонента plug-in для будь-яких перевірок, які потребують більше контексту, ніж доступно в одному записі часу, або для будь-яких перевірок, які потрібно виконати з вбудованими оновленнями в сітці. Щоб виконати перевірку, створіть настроюваний компонент plug-in для сутності **Запис часу**.

### <a name="copying-time-entries"></a>Копіювання записи часу
Використовуйте подання **Копіювати стовпці із записами часу**, щоб визначити список полів для копіювання при введенні часу. **Дата** й **Тривалість** є обов'язковими полями, їх не слід видаляти з подання.


[!INCLUDE[footer-include](../includes/footer-banner.md)]