---
title: Синхронізуйте фактичні параметри проекту безпосередньо із Project Service Automation у журналі інтеграції проектів для публікації в Finance and Operations
description: У цій темі описуються шаблони та основні завдання, що використовуються для синхронізації фактичних параметрів проекту безпосередньо з Microsoft Dynamics 365 Project Service Automation до Finance and Operations.
author: Yowelle
manager: AnnBe
ms.date: 07/20/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: andchoi
ms.search.validFrom: 2016-11-28
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: cff62e739e88dc45e7c3d1ea044875f0600f2bc1
ms.sourcegitcommit: 5c4c9bf3ba018562d6cb3443c01d550489c415fa
ms.translationtype: HT
ms.contentlocale: uk-UA
ms.lasthandoff: 10/16/2020
ms.locfileid: "4086848"
---
# <a name="synchronize-project-actuals-directly-from-project-service-automation-to-the-project-integration-journal-for-posting-in-finance-and-operations"></a>Синхронізуйте фактичні параметри проекту безпосередньо із Project Service Automation у журналі інтеграції проектів для публікації в Finance and Operations

[!include[banner](../includes/banner.md)]

У цій темі описуються шаблони та основні завдання, що використовуються для синхронізації фактичних параметрів проекту безпосередньо з Dynamics 365 Project Service Automation до Dynamics 365 Finance.

У цьому шаблоні синхронізуються транзакції з Project Service Automation у проміжну таблицю в Finance. Після завершення синхронізації ви **повинні** імпортувати дані з проміжної таблиці до журналу інтеграції.

> [!NOTE]
> - Інтеграція фактичних параметрів проекту доступна, починаючи з версії 8.0.1.
> - Якщо ви використовуєте Enterprise edition 7.3.0 після інсталяції KB 4132657 і KB 4132660, ви зможете використовувати шаблони для інтеграції завдань проекту, категорій транзакцій витрат, оцінки годин, оцінки витрат і фактичних параметрів, а також для настроювання функції блокування. У разі необхідності скинути розподіл коштів рекомендуємо також інсталювати KB 4131710.
> - Якщо ви використовуєте версію 7.3.0 і виконуєте перенесення платних транзакцій із Project Service Automation, ви маєте інсталювати KB 4345320, щоб мати можливість включити таку плату в рахунок проекту.
> - Якщо ви виконуєте проводку сум податку з продажу за фактичними параметрами часу або витрат у Project Service Automation ви маєте інсталювати оновлення 7 Project Service Automation. В іншому разі фактичні параметри оподаткування не будуть пов’язані з відповідними фактичними параметрами часу або витрат і не синхронізуватимуться в Finance. Для отримання докладнішої інформації зверніться до служби підтримки.

## <a name="data-flow-for-project-service-automation-to-finance"></a>Потік даних для Project Service Automation до Finance

У рішеннях із інтеграції Project Service Automation до Finance використовується функція інтеграції даних для синхронізації даних у екземплярах Project Service Automation і Finance. Шаблони інтеграції, доступні завдяки функції інтеграції даних, забезпечують потік даних стосовно фактичних параметрів проекту з Project Service Automation до Finance.

Наведена далі ілюстрація показує, як синхронізуються дані між Project Service Automation і Finance.

[![Потік даних для інтеграції Project Service Automation з Finance and Operations](./media/ProjectActualsFlow.jpg)](./media/ProjectActualsFlow.jpg)

## <a name="project-actuals-from-project-service-automation"></a>Фактичні параметри проекту з Project Service Automation

### <a name="template-and-tasks"></a>Шаблони й завдання

Для здійснення доступу до наявних шаблонів у центрі адміністрування Microsoft Power Apps виберіть **Проекти** , потім у верхньому правому куті виберіть **Новий проект** , щоб здійснити вибір загальнодоступних шаблонів.

Наведений далі шаблон і основні завдання використовуються для синхронізації фактичних параметрів проекту з Project Service Automation до Finance:

- **Найменування шаблону в інтеграції даних:** Фактичні параметри проекту (PSA до Fin і Ops)
- **Найменування завдань у проекті:**

    - Фактично
    - Зв’язок транзакцій

### <a name="entity-set"></a>Група сутностей

| Project Service Automation | Фінанси                                   |
|----------------------------|----------------------------------------------------------|
| Фактично                    | Сутність інтеграції для фактичних параметрів проекту                   |
| Зв’язки між транзакціями    | Сутність інтеграції для зв'язків між транзакціями проекту |

### <a name="entity-flow"></a>Потік сутностей

Керування фактичними параметрами проекту здійснюється в Project Service Automation і вони синхронізуються в журналі інтеграції проектів у Finance. Фінансові параметри за замовчуванням і налаштування публікації визначатимуть спосіб, у який застосовуватиметься бухгалтерський облік.

### <a name="prerequisites"></a>Вимоги

Перш ніж синхронізувати фактичні параметри необхідно настроїти параметри інтеграції Project Service Automation і синхронізувати проекти, завдання за проектами та категорії транзакцій щодо витрат проектів.

### <a name="power-query"></a>Power Query

Для виконання цих завдань ви маєте використовувати Microsoft Power Query для Excel у шаблоні фактичних параметрів проекту:

- Трансформуйте тип транзакції в Project Service Automation на правильний тип транзакції в Finance. Така трансформація вже визначена в шаблоні фактичних параметрів проекту (PSA до Fin і Ops).
- Трансформуйте тип виставлення рахунків у Project Service Automation на правильний тип виставлення рахунків у Finance. Така трансформація вже визначена в шаблоні фактичних параметрів проекту (PSA до Fin і Ops). Після цього, залежно від конфігурації сторінки **параметрів інтеграції Project Service Automation** , тип виставлення рахунків співставляється з властивістю рядка.
- Виконайте фільтрування за критерієм конкретних організаційних підрозділів ресурсів, що мають бути синхронізовані з цим шаблоном.
- Якщо синхронізації до Finance підлягають фактичні параметри внутрішнього часу або внутрішніх витрат, ви маєте трансформувати договірну організаційну одиницю в правильну юридичну особу в Finance. У шаблоні фактичних параметрів проекту (PSA до Fin і Ops) на основі демонстраційних даних визначається умовний стовпець. Ви маєте оновити вставлений востаннє умовний стовпець із урахуванням правильних юридичних осіб. У іншому разі могла статися помилка інтеграції або до Finance імпортувалися невірні фактичні транзакції.
- Якщо фактичні параметри внутрішнього часу або внутрішніх витрат не синхронізуються до Finance, ви маєте видалити з шаблону останній вставлений умовний стовпець. У іншому разі могла статися помилка інтеграції або до Finance імпортувалися невірні фактичні транзакції.

#### <a name="contract-organizational-unit"></a>Договірна організаційна одиниця
Щоб оновити вставлений умовний стовпець у шаблоні, клацніть стрілку **Карта** , щоб відкрити зіставлення. Виберіть посилання **Розширений запит і фільтрування** , щоб відкрити Power Query.

- Якщо ви використовуєте шаблон фактичних параметрів проекту за замовчуванням (PSA до Fin і Ops), у Power Query виберіть останню **Вставлену умову** в розділі **Застосовані кроки**. У записі **Функція** замініть **USSI** найменуванням юридичної особи, яке слід використовувати при інтеграції. Додайте умови до запису **Функція** залежно від своїх вимог і оновіть умову **в іншому разі** з **USMF** для правильної юридичної особи.
- Якщо ви створюєте новий шаблон, ви маєте додати стовпець для внутрішнього часу та витрат. Виберіть **Додати умовний стовпець** і введіть ім’я стовпця, наприклад **Юридична особа**. Введіть умову для стовпця, де, якщо **msdyn\_contractorganizationalunitid.msdyn\_name** є \<organizational unit\>, тоді \<enter the legal entity\>; в іншому разі null-значення.

### <a name="template-mapping-in-data-integration"></a>Зіставлення шаблонів у інтеграції даних

Наведені далі ілюстрації показують приклад зіставлення завдань шаблону в інтеграції даних. У зіставленні показано інформацію поля, яку буде синхронізовано з Project Service Automation до Finance.

[![Зіставлення шаблону — фактичні дані](./media/ActualsMapping.jpg)](./media/ActualsMapping.jpg)

[![Зіставлення шаблону — з'єднання з транзакціями](./media/TransactionConnections.jpg)](./media/TransactionConnections.jpg)

## <a name="import-from-staging-table-after-integration-from-project-service-automation"></a>Імпортуйте проміжну таблицю після інтеграції з Project Service Automation

Періодичний процес імпортування проміжної таблиці слід запускати після синхронізації фактичних параметрів із Project Service Automation до Finance. У результаті цього процесу транзакції проекту з проміжної таблиці буде імпортовано до журналу інтеграції Project Service Automation, у якому застосовується бухгалтерський облік і можна публікувати імпортовані транзакції. Рекомендуємо запускати цей процес у пакетному режимі. Як додаткова можливість, його можна налаштувати так, щоб він запускався в пакетному режимі періодично.

## <a name="update-actuals-from-finance"></a>Оновлюйте фактичні параметри у Finance

### <a name="template-and-tasks"></a>Шаблони й завдання

Наведений далі шаблон і основні завдання використовуються для синхронізації номеру ваучера та податків з продажу для опублікованих транзакцій за проектом із Finance до Project Service Automation:

- **Найменування шаблону в інтеграції даних:** Оновлення фактичних параметрів проекту (Fin Ops до PSA)
- **Найменування завдань у проекті:**

    - Фактично 
    - Зв’язок транзакцій

### <a name="entity-set"></a>Група сутностей

| Фінанси                                                  | Project Service Automation |
|----------------------------------------------------------|----------------------------|
| Сутність інтеграції для фактичних параметрів проекту                   | Фактично                    |
| Сутність інтеграції для зв'язків між транзакціями проекту | Зв’язки між транзакціями    |

### <a name="entity-flow"></a>Потік сутностей

Керування фактичними параметрами проекту здійснюється в Project Service Automation і вони синхронізуються в журналі інтеграції проектів у Finance. Після публікації фактичних параметрів у Finance вони оновлюються в Project Service Automation, при цьому використовується номер ваучера з Finance. Якщо в Finance додано податок із продажу, в Project Service Automation створюються нові фактичні параметри оподаткування.

### <a name="power-query"></a>Power Query

Для виконання цих завдань ви маєте використовувати Microsoft Power Query у шаблоні оновлення фактичних параметрів проекту:

- Трансформуйте тип транзакції в Finance на правильний тип транзакції в Project Service Automation. Така трансформація вже визначена в шаблоні оновлення фактичних параметрів проекту (Fin Ops до PSA)
- Трансформуйте тип виставлення рахунків у Finance на правильний тип виставлення рахунків у Project Service Automation. Така трансформація вже визначена в шаблоні оновлення фактичних параметрів проекту (Fin Ops до PSA)

### <a name="template-mapping-in-data-integration"></a>Зіставлення шаблонів у інтеграції даних

Наведені далі ілюстрації показують приклади зіставлення завдань шаблону в інтеграції даних. У зіставленні показано інформацію поля, яку буде синхронізовано з Finance до Project Service Automation.

[![Зіставлення шаблону — оновлення фактичних даних](./media/ActualsUpdateMapping.jpg)](./media/ActualsUpdateMapping.jpg)

[![Зіставлення шаблону — оновлення транзакцій](./media/TransactionConnectionsUpdate.jpg)](./media/TransactionConnectionsUpdate.jpg)
