---
title: Синхронізуйте сервісні договори проекту та проекти безпосередньо з Project Service Automation до Finance and Operations
description: У цій темі описується шаблон та основні завдання, що використовуються для синхронізації сервісних договорів проекту та проектів безпосередньо з Microsoft Dynamics 365 Project Service Automation до Dynamics 365 Finance.
author: Yowelle
manager: AnnBe
ms.date: 09/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: andchoi
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: 0b3bc159fff25c4f6e5b1ed1b2eabbba675fb0f5
ms.sourcegitcommit: 573be7e36604ace82b35e439cfa748aa7c587415
ms.translationtype: HT
ms.contentlocale: uk-UA
ms.lasthandoff: 11/25/2020
ms.locfileid: "4642658"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance-and-operations"></a><span data-ttu-id="536ce-103">Синхронізуйте сервісні договори проекту та проекти безпосередньо з Project Service Automation до Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="536ce-103">Synchronize project contracts and projects directly from Project Service Automation to Finance and Operations</span></span>

[!include[banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

<span data-ttu-id="536ce-104">У цій темі описується шаблон та основні завдання, що використовуються для синхронізації сервісних договорів проекту та проектів безпосередньо з Dynamics 365 Project Service Automation до Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="536ce-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="536ce-105">Якщо ви використовуєте Enterprise edition 7.3.0, ви маєте інсталювати базу знань KB 4074835.</span><span class="sxs-lookup"><span data-stu-id="536ce-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="536ce-106">Потік даних для Project Service Automation до Finance</span><span class="sxs-lookup"><span data-stu-id="536ce-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="536ce-107">Перш ніж використовувати Project Service Automation для рішення з інтеграції Finance, слід ознайомитися з функцією інтегрування даних з допомогою Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="536ce-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="536ce-108">У рішеннях із інтеграції Project Service Automation до Finance використовується функція інтеграції даних для синхронізації даних у екземплярах Project Service Automation і Finance.</span><span class="sxs-lookup"><span data-stu-id="536ce-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="536ce-109">Шаблон інтеграції, доступний з функцією інтеграції даних, забезпечує потік даних про проект, сервісних договорів проекту, проектів, сервісні роботи за договором проекту, етапи сервісних робіт за договором проекту з Project Service Automation до Finance.</span><span class="sxs-lookup"><span data-stu-id="536ce-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="536ce-110">Наведена далі ілюстрація показує, як синхронізуються дані між Project Service Automation і Finance.</span><span class="sxs-lookup"><span data-stu-id="536ce-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="536ce-111">[![Потік даних для інтеграції Project Service Automation з Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="536ce-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="536ce-112">Шаблони й завдання</span><span class="sxs-lookup"><span data-stu-id="536ce-112">Templates and tasks</span></span>

<span data-ttu-id="536ce-113">Для здійснення доступу до наявних шаблонів у центрі адміністрування Microsoft Power Apps виберіть **Проекти**, потім у верхньому правому куті виберіть **Новий проект**, щоб здійснити вибір загальнодоступних шаблонів.</span><span class="sxs-lookup"><span data-stu-id="536ce-113">To access the available templates, in the Microsoft Power Apps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="536ce-114">Наведені далі шаблони й основні завдання використовуються для синхронізації сервісних договорів проектів та проектів з Project Service Automation до Finance:</span><span class="sxs-lookup"><span data-stu-id="536ce-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="536ce-115">Інтеграція з Dynamics 365 Project Service Automation v2.x</span><span class="sxs-lookup"><span data-stu-id="536ce-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="536ce-116">**Найменування шаблону в інтеграції даних:** Проекти та сервісні договори (PSA до Fin і Ops)</span><span class="sxs-lookup"><span data-stu-id="536ce-116">**Name of the template in Data integration:** Projects and contracts (PSA to Fin and Ops)</span></span>
- <span data-ttu-id="536ce-117">**Найменування завдань у проекті:**</span><span class="sxs-lookup"><span data-stu-id="536ce-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="536ce-118">Сервісні договори проекту PSA в Fin і OPS</span><span class="sxs-lookup"><span data-stu-id="536ce-118">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="536ce-119">Проекти PSA в Fin і Ops</span><span class="sxs-lookup"><span data-stu-id="536ce-119">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="536ce-120">Сервісні роботи за договором проекту PSA в Fin і Ops</span><span class="sxs-lookup"><span data-stu-id="536ce-120">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="536ce-121">Проміжні етапи сервісних робіт за договором проекту PSA в Fin і Ops</span><span class="sxs-lookup"><span data-stu-id="536ce-121">Project contract line milestones PSA to Fin and Ops</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="536ce-122">Інтеграція з Dynamics 365 Project Service Automation v3.x</span><span class="sxs-lookup"><span data-stu-id="536ce-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="536ce-123">Існує зміна схеми в Project Service Automation, яка впливає на шаблон проміжного етапу сервісної роботи за договором і використовує V2-версію шаблону, щоб інтегрувати програму Project Service Automation V3. x з Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="536ce-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="536ce-124">**Найменування шаблону в інтеграції даних:** проекти та сервісні договори (PSA 3.x до Fin і Ops) - v2</span><span class="sxs-lookup"><span data-stu-id="536ce-124">**Name of the template in Data integration:** Projects and Contracts (PSA 3.x to Fin and Ops) - v2</span></span>
- <span data-ttu-id="536ce-125">**Найменування завдань у проекті:**</span><span class="sxs-lookup"><span data-stu-id="536ce-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="536ce-126">Сервісні договори проекту PSA в Fin і OPS</span><span class="sxs-lookup"><span data-stu-id="536ce-126">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="536ce-127">Проекти PSA в Fin і Ops</span><span class="sxs-lookup"><span data-stu-id="536ce-127">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="536ce-128">Сервісні роботи за договором проекту PSA в Fin і Ops</span><span class="sxs-lookup"><span data-stu-id="536ce-128">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="536ce-129">Проміжні етапи сервісних робіт за договором проекту PSA в Fin і Ops</span><span class="sxs-lookup"><span data-stu-id="536ce-129">Project contract line milestones PSA to Fin and Ops</span></span>

<span data-ttu-id="536ce-130">Щоб уможливити синхронізацію сервісних договорів проекту та проектів ви маєте синхронізувати облікові записи.</span><span class="sxs-lookup"><span data-stu-id="536ce-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="536ce-131">Група сутностей</span><span class="sxs-lookup"><span data-stu-id="536ce-131">Entity set</span></span>

| <span data-ttu-id="536ce-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="536ce-132">Project Service Automation</span></span>       | <span data-ttu-id="536ce-133">Фінанси</span><span class="sxs-lookup"><span data-stu-id="536ce-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="536ce-134">Замовлення</span><span class="sxs-lookup"><span data-stu-id="536ce-134">Orders</span></span>                           | <span data-ttu-id="536ce-135">Сутність інтеграції для сервісних договорів проекту</span><span class="sxs-lookup"><span data-stu-id="536ce-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="536ce-136">Проекти</span><span class="sxs-lookup"><span data-stu-id="536ce-136">Projects</span></span>                         | <span data-ttu-id="536ce-137">Сутність інтеграції для проекту</span><span class="sxs-lookup"><span data-stu-id="536ce-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="536ce-138">Позиції замовлення</span><span class="sxs-lookup"><span data-stu-id="536ce-138">Order lines</span></span>                      | <span data-ttu-id="536ce-139">Сутність інтеграції для сервісної роботи за договором проекту</span><span class="sxs-lookup"><span data-stu-id="536ce-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="536ce-140">Проміжні етапи сервісної роботи за договором проекту</span><span class="sxs-lookup"><span data-stu-id="536ce-140">Project contract line milestones</span></span> | <span data-ttu-id="536ce-141">Сутність інтеграції для проміжних етапів сервісної роботи за договором проекту</span><span class="sxs-lookup"><span data-stu-id="536ce-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="536ce-142">Потік сутностей</span><span class="sxs-lookup"><span data-stu-id="536ce-142">Entity flow</span></span>

<span data-ttu-id="536ce-143">Керування сервісними договорами проекту здійснюється в Project Service Automation, і вони синхронізуються в Finance як сервісні договори проекту.</span><span class="sxs-lookup"><span data-stu-id="536ce-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="536ce-144">У рамках шаблону інтеграції можна задати джерело інтеграції у Finance для сервісного договору проекту.</span><span class="sxs-lookup"><span data-stu-id="536ce-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="536ce-145">Керування проектами часу та матеріалів і фіксованої ціни здійснюється в Project Service Automation, і вони синхронізуються в Finance як проекти.</span><span class="sxs-lookup"><span data-stu-id="536ce-145">Time and material project and Fixed price projects are managed in Project Service Automation, and they are synchronized to Finance as projects.</span></span> <span data-ttu-id="536ce-146">У рамках інтеграції шаблону можна задати джерело інтеграції у Finance для проекту.</span><span class="sxs-lookup"><span data-stu-id="536ce-146">As part of the template integration, you can set the integration source in Finance for the project.</span></span>

<span data-ttu-id="536ce-147">Керування сервісною роботою за договорами проекту здійснюється в Project Service Automation, і вони синхронізуються в Finance як правила виставлення рахунків за сервісним договором проекту.</span><span class="sxs-lookup"><span data-stu-id="536ce-147">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="536ce-148">Якщо метод виставлення рахунка відрізняється від типу проекту за замовчуванням, то в синхронізації оновлюється тип проекту для проекту сервісної роботи за договором і проектна група.</span><span class="sxs-lookup"><span data-stu-id="536ce-148">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="536ce-149">Керування проміжними етапами сервісної роботи за договорами проекту здійснюється в Project Service Automation, і вони синхронізуються в Finance як проміжні етапи правила виставлення рахунків за сервісним договором проекту.</span><span class="sxs-lookup"><span data-stu-id="536ce-149">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="536ce-150">Рішення для інтеграції Project Service Automation до Finance</span><span class="sxs-lookup"><span data-stu-id="536ce-150">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="536ce-151">Поле **Ідентифікатор сервісного договору проекту** доступне на сторінці **Сервісні договори проекту**.</span><span class="sxs-lookup"><span data-stu-id="536ce-151">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="536ce-152">Це поле було створено природним і унікальним ключем для підтримки інтеграції.</span><span class="sxs-lookup"><span data-stu-id="536ce-152">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="536ce-153">Якщо під час створення нового сервісного договору проекту значення **Ідентифікатора сервісного договору проекту** ще не існує, воно автоматично генерується за допомогою числової послідовності.</span><span class="sxs-lookup"><span data-stu-id="536ce-153">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="536ce-154">Значення складається з **ORD**, за яким слідує зростаюча числова послідовність і суфікс із шести символів.</span><span class="sxs-lookup"><span data-stu-id="536ce-154">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="536ce-155">Ось приклад: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="536ce-155">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="536ce-156">Поле **Номер проекту** доступне на сторінці **Проекти**.</span><span class="sxs-lookup"><span data-stu-id="536ce-156">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="536ce-157">Це поле було створено природним і унікальним ключем для підтримки інтеграції.</span><span class="sxs-lookup"><span data-stu-id="536ce-157">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="536ce-158">Якщо під час створення нового проекту значення **Номер проекту** ще не існує, воно автоматично генерується за допомогою числової послідовності.</span><span class="sxs-lookup"><span data-stu-id="536ce-158">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="536ce-159">Значення складається з **PRJ**, за яким слідує зростаюча числова послідовність і суфікс із шести символів.</span><span class="sxs-lookup"><span data-stu-id="536ce-159">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="536ce-160">Ось приклад: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="536ce-160">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="536ce-161">Коли застосовується рішення з інтеграції Project Service Automation у Finance, сценарій оновлення установлює поле **Ідентифікатор сервісного договору проекту** для наявних сервісних договорів проекту, а також поле **Номер проекту** для існуючих проектів в Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="536ce-161">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="536ce-162">Необхідні компоненти та налаштування зіставлення</span><span class="sxs-lookup"><span data-stu-id="536ce-162">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="536ce-163">Щоб уможливити синхронізацію сервісних договорів проекту та проектів ви маєте синхронізувати облікові записи.</span><span class="sxs-lookup"><span data-stu-id="536ce-163">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="536ce-164">У наборі з'єднання додайте відображення поля ключа інтеграції для **msdyn\_organizationalunits** до **msdyn\_name \[Name\]**.</span><span class="sxs-lookup"><span data-stu-id="536ce-164">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="536ce-165">Можливо, спочатку потрібно додати проект до набору підключень.</span><span class="sxs-lookup"><span data-stu-id="536ce-165">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="536ce-166">Для отримання додаткових відомостей див. розділ [Інтеграція даних до Common Data Service для програм](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="536ce-166">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="536ce-167">У наборі з'єднання додайте відображення поля ключа інтеграції для **msdyn\_projects** в **msdynce\_projectnumber \[Project Number\]**.</span><span class="sxs-lookup"><span data-stu-id="536ce-167">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="536ce-168">Можливо, спочатку потрібно додати проект до набору підключень.</span><span class="sxs-lookup"><span data-stu-id="536ce-168">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="536ce-169">Для отримання додаткових відомостей див. розділ [Інтеграція даних до Common Data Service для програм](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="536ce-169">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="536ce-170">**SourceDataID** для сервісних договорів проекту та проектів можна оновити до іншого значення або видалити з зіставлення.</span><span class="sxs-lookup"><span data-stu-id="536ce-170">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="536ce-171">Значення шаблону за замовчуванням — це **Project Service Automation**.</span><span class="sxs-lookup"><span data-stu-id="536ce-171">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="536ce-172">Зіставлення **PaymentTerms** необхідно оновлювати таким чином, щоб воно відображало дійсні умови оплати у Finance.</span><span class="sxs-lookup"><span data-stu-id="536ce-172">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="536ce-173">Крім того, можна видалити зіставлення з завдання проекту.</span><span class="sxs-lookup"><span data-stu-id="536ce-173">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="536ce-174">У зіставленні значення за замовчуванням встановлено значення за замовчуванням для демонстраційних даних.</span><span class="sxs-lookup"><span data-stu-id="536ce-174">The default value map has default values for demo data.</span></span> <span data-ttu-id="536ce-175">У наведеній нижче таблиці показано значення в Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="536ce-175">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="536ce-176">Значення</span><span class="sxs-lookup"><span data-stu-id="536ce-176">Value</span></span> | <span data-ttu-id="536ce-177">Опис</span><span class="sxs-lookup"><span data-stu-id="536ce-177">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="536ce-178">1</span><span class="sxs-lookup"><span data-stu-id="536ce-178">1</span></span>     | <span data-ttu-id="536ce-179">Оплата через 30 днів</span><span class="sxs-lookup"><span data-stu-id="536ce-179">Net 30</span></span>        |
    | <span data-ttu-id="536ce-180">2</span><span class="sxs-lookup"><span data-stu-id="536ce-180">2</span></span>     | <span data-ttu-id="536ce-181">Оплата через 30 днів, у разі оплати через 10 днів знижка 2%</span><span class="sxs-lookup"><span data-stu-id="536ce-181">2% 10, Net 30</span></span> |
    | <span data-ttu-id="536ce-182">3</span><span class="sxs-lookup"><span data-stu-id="536ce-182">3</span></span>     | <span data-ttu-id="536ce-183">Оплата через 45 днів</span><span class="sxs-lookup"><span data-stu-id="536ce-183">Net 45</span></span>        |
    | <span data-ttu-id="536ce-184">4</span><span class="sxs-lookup"><span data-stu-id="536ce-184">4</span></span>     | <span data-ttu-id="536ce-185">Оплата через 60 днів</span><span class="sxs-lookup"><span data-stu-id="536ce-185">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="536ce-186">Power Query</span><span class="sxs-lookup"><span data-stu-id="536ce-186">Power Query</span></span>

<span data-ttu-id="536ce-187">Якщо виконуються наведені умови, для фільтрування даних ви маєте використовувати Microsoft Power Query для Excel:</span><span class="sxs-lookup"><span data-stu-id="536ce-187">You must use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="536ce-188">У Dynamics 365 Sales є замовлення.</span><span class="sxs-lookup"><span data-stu-id="536ce-188">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="536ce-189">У Project Service Automation є кілька організаційних одиниць, і ці організаційні одиниці будуть зіставлені з кількома юридичними особами у Finance.</span><span class="sxs-lookup"><span data-stu-id="536ce-189">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="536ce-190">Дотримуйтеся цих рекомендацій, якщо передбачається використання Power Query:</span><span class="sxs-lookup"><span data-stu-id="536ce-190">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="536ce-191">У шаблоні проектів і сервісних договорів (PSA в Fin і Ops) є фільтр за замовчуванням, який містить лише замовлення на продаж типу **Work item (msdyn\_ordertype = 192350001)**.</span><span class="sxs-lookup"><span data-stu-id="536ce-191">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="536ce-192">Цей фільтр допомагає гарантувати, що сервісні договори проектів не створюються для замовлень на продаж у Finance.</span><span class="sxs-lookup"><span data-stu-id="536ce-192">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="536ce-193">Цей фільтр слід додати в разі створення власного шаблона.</span><span class="sxs-lookup"><span data-stu-id="536ce-193">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="536ce-194">Слід створити фільтр Power Query, який містить тільки контрактні організації, які мають синхронізуватися з юридичною особою набору інтеграційного з'єднання.</span><span class="sxs-lookup"><span data-stu-id="536ce-194">You must create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="536ce-195">Наприклад, сервісні договори проекту, які ви маєте з організаційної одиницею сервісного договору Contoso US мають бути синхронізовані з юридичною особою USSI, але сервісні договори проекту, які ви маєте з організаційною одиницею Contoso Global мають бути синхронізовані з юридичною особою USMF.</span><span class="sxs-lookup"><span data-stu-id="536ce-195">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="536ce-196">Якщо цей фільтр не додано до зіставлення завдань, усі сервісні договори проекту буде синхронізовано з юридичною особою, визначеною для набору підключень, незалежно від організаційної одиниці сервісного договору.</span><span class="sxs-lookup"><span data-stu-id="536ce-196">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="536ce-197">Зіставлення шаблонів у інтеграції даних</span><span class="sxs-lookup"><span data-stu-id="536ce-197">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="536ce-198">Поля **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, і **AddressZipCode** не включаються в зіставлення за замовчуванням для сервісних договорів проекту.</span><span class="sxs-lookup"><span data-stu-id="536ce-198">The **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="536ce-199">Можна додати зіставлення, якщо потрібно, щоб ці дані було синхронізовано для сервісних договорів проекту.</span><span class="sxs-lookup"><span data-stu-id="536ce-199">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="536ce-200">Поля **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber** і **ProjectType** не включаються до зіставлення за замовчуванням для проекту.</span><span class="sxs-lookup"><span data-stu-id="536ce-200">The **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="536ce-201">Можна додати зіставлення, якщо потрібно, щоб ці дані було синхронізовано для проектів.</span><span class="sxs-lookup"><span data-stu-id="536ce-201">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="536ce-202">Наведені далі ілюстрації показують приклади зіставлення завдань шаблону в інтеграції даних.</span><span class="sxs-lookup"><span data-stu-id="536ce-202">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="536ce-203">У зіставленні показано інформацію поля, яку буде синхронізовано з Project Service Automation до Finance.</span><span class="sxs-lookup"><span data-stu-id="536ce-203">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="536ce-204">[![Зіставлення шаблону проекту для проектної угоди](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="536ce-204">[![Project contract template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="536ce-205">[![Зіставлення шаблону проекту](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="536ce-205">[![Project template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="536ce-206">[![Зіставлення шаблону сервісної роботи за договором проекту](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="536ce-206">[![Project contract lines template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="536ce-207">[![Зіставлення шаблону проміжних етапів сервісної роботи за договором проекту](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="536ce-207">[![Project contract line milestone template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="536ce-208">Зіставлення проміжного етапу сервісної роботи за договором у проектах та сервісних договорах (PSA 3. x до Dynamics) — шаблон v2.</span><span class="sxs-lookup"><span data-stu-id="536ce-208">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="536ce-209">[![Зіставлення шаблону проміжних етапів сервісної роботи за договором проекту з шаблоном версії 2](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="536ce-209">[![Project contract line milestone mapping with version two template](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>
