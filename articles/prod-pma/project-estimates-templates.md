---
title: Синхронізуйте кошториси безпосередньо з Project Service Automation до Finance and Operations
description: У цій темі описуються шаблони та основні завдання, що використовуються для синхронізації оцінок часу та кошторисів витрат за проектом безпосередньо з Microsoft Dynamics 365 Project Service Automation до Dynamics 365 Finance.
author: Yowelle
manager: AnnBe
ms.date: 07/20/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: andchoi
ms.search.validFrom: 2016-11-28
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: 58e204b2c1238e00ffb16533cc82dad69fbf77a9
ms.sourcegitcommit: fa32b1893286f20271fa4ec4be8fc68bd135f53c
ms.translationtype: HT
ms.contentlocale: uk-UA
ms.lasthandoff: 02/15/2021
ms.locfileid: "5289484"
---
# <a name="synchronize-project-estimates-directly-from-project-service-automation-to-finance-and-operations"></a>Синхронізуйте кошториси безпосередньо з Project Service Automation до Finance and Operations

[!include[banner](../includes/banner.md)]

У цій темі описуються шаблони та основні завдання, що використовуються для синхронізації оцінок часу та кошторисів витрат за проектом безпосередньо з Dynamics 365 Project Service Automation до Dynamics 365 Finance.

> [!NOTE]
> - У версії 8.0 доступні інтеграція завдань за проектом, категорії транзакцій витрат, оцінки часу, кошториси витрат і блокування функцій.
> - У версії 8.0.1 або пізніших версіях доступна інтеграція фактичних параметрів.

## <a name="data-flow-for-project-service-automation-to-finance"></a>Потік даних для Project Service Automation до Finance

У рішеннях із інтеграції Project Service Automation до Finance використовується функція інтеграції даних для синхронізації даних у екземплярах Project Service Automation і Finance. Шаблони інтеграції, доступні завдяки функції інтеграції даних, забезпечують потік даних стосовно оцінок часу за проектом і кошторисів витрат за проектом із Project Service Automation до Finance.

Наведена далі ілюстрація показує, як синхронізуються дані між Project Service Automation і Finance.

[![Потік даних для інтеграції Project Service Automation з Finance](./media/ProjectEstimatesFlow.png)](./media/ProjectEstimatesFlow.png)

## <a name="project-hour-estimates"></a>Оцінки часу проекту

### <a name="template-and-tasks"></a>Шаблони й завдання

Для здійснення доступу до наявних шаблонів у центрі адміністрування Microsoft Power Apps виберіть **Проекти**, потім у верхньому правому куті виберіть **Новий проект**, щоб здійснити вибір загальнодоступних шаблонів.

Наведений далі шаблон і основні завдання використовуються для синхронізації оцінок часу проекту з Project Service Automation до Finance:

- **Ім’я шаблону в інтеграції даних:** Оцінки часу проекту (PSA до Fin і Ops)
- **Найменування завдань у проекті:**

    - Зв'язок між транзакціями
    - Кошторис витрат

### <a name="entity-set"></a>Група сутностей

| Project Service Automation | Фінанси                                       |
|----------------------------|-----------------------------------------------|
| Завдання проекту              | Сутність інтеграції для оцінок часу проекту |

### <a name="entity-flow"></a>Потік сутностей

Керування оцінками часу проекту здійснюється в Project Service Automation і вони синхронізуються в Finance як прогнози часу проекту.

### <a name="prerequisites"></a>Вимоги

Перш ніж виконати синхронізацію оцінок часу проекту ви маєте синхронізувати проекти, завдання проектів і категорії транзакцій витрат проекту.

### <a name="power-query"></a>Power Query

Для виконання цих завдань ви маєте використовувати Microsoft Power Query для Excel у шаблоні оцінок часу проекту:

- Задайте ідентифікатор моделі прогнозування за замовчуванням, який використовуватиметься, коли в процесі інтеграції створюватимуться нові прогнози часу.
- Виконайте фільтрування будь-яких записів, специфічних для конкретних ресурсів, у завданні, яке не інтегруватиметься в часові прогнози.
- Фільтруйте будь-які порожні рядки категорій транзакцій. Не виконання цього завдання може призвести до складання невірних часових прогнозів.

#### <a name="set-the-default-forecast-model-id"></a>Задайте ідентифікатор моделі прогнозу за замовчуванням

Щоб оновити ідентифікатор моделі прогнозу за замовчуванням у шаблоні, клацніть стрілку **Карта**, щоб відкрити зіставлення. Потім виберіть посилання **Розширений запит і фільтрування**.

- Якщо ви використовуєте шаблон часових оцінок проекту за замовчуванням (PSA до Fin і Ops), у Power Query виберіть **Вставлену умову** в списку **Застосовані кроки**. У записі **Функція** замініть **O\_forecast** назвою ідентифікатора моделі прогнозу, яку слід використовувати з цією інтеграцією. У шаблоні за замовчуванням є ідентифікатор моделі прогнозу, взятий із демонстраційних даних.
- Необхідно додати цей стовпець, якщо ви створюєте новий шаблон. У Power Query виберіть **Додати умовний стовпець**, потім введіть ім’я нового стовпця, наприклад, **ModelID**. Введіть умову для стовпця, де, якщо завдання проекту не є null-значенням, тоді \<enter the forecast model ID\>; в іншому разі null-значення.

#### <a name="filter-out-resource-specific-records"></a>Фільтруйте записи, специфічні для конкретних ресурсів

Шаблон часових оцінок проекту (PSA до Fin і Ops) має фільтр за замовчуванням, який видаляє будь-які записи, специфічні для конкретних ресурсів. Цей фільтр слід додати в разі створення власного шаблона. Виберіть посилання **Розширений запит і фільтрування**, щоб виконати фільтрування в стовпці **msdyn\_islinetask**, так щоб залишалися включеними лише записи **Хибно**.

#### <a name="filter-out-empty-transaction-category-rows"></a>Фільтруйте будь-які порожні рядки категорій транзакцій.

Потрібно додати фільтр, щоб видаляти будь-які рядки з порожніми категоріями транзакцій. Це завдання обов'язкове, незалежно від того, чи використовується шаблон за замовчуванням або створюється власний шаблон. Цей фільтр видаляє будь-які підсумкові рядки з Project Service Automation, які можуть спричинити некоректні прогнози в Finance. Виберіть посилання **Розширений запит і фільтрування**, щоб фільтрувати записи з null-значенням у стовпці **msdyn\_transactioncategory\_value**.

### <a name="template-mapping-in-data-integration"></a>Зіставлення шаблонів у інтеграції даних

Наведена далі ілюстрація показує приклад зіставлення завдань шаблону в інтеграції даних. У зіставленні показано інформацію поля, яку буде синхронізовано з Project Service Automation до Finance.

[![Зіставлення завдань шаблонів у інтеграції даних](./media/ProjectHourEstimatesMapping.jpg)](./media/ProjectHourEstimatesMapping.jpg)

## <a name="project-expense-estimates"></a>Кошториси витрат за проектом

### <a name="template-and-tasks"></a>Шаблони й завдання

Наведений далі шаблон і основні завдання використовуються для синхронізації кошторисів витрат проекту з Project Service Automation до Finance:

- **Ім’я шаблону в інтеграції даних:** Кошториси витрат проекту (PSA до Fin і Ops)
- **Найменування завдань у проекті:**

    - Зв'язок між транзакціями 
    - Кошторис витрат

### <a name="entity-set"></a>Група сутностей

| Project Service Automation | Finance                                                  |
|----------------------------|----------------------------------------------------------|
| Зв’язки між транзакціями    | Сутність інтеграції для зв'язків між транзакціями проекту |
| Позиції оцінки             | Сутність інтеграції для кошторисів витрат проекту         |

### <a name="entity-flow"></a>Потік сутностей

Керування кошторисами витрат проекту здійснюється в Project Service Automation, і вони синхронізуються в Finance як прогнози витрат проекту.

### <a name="prerequisites"></a>Вимоги

Перш ніж виконати синхронізацію кошторисів витрат проекту ви маєте синхронізувати проекти, завдання проектів і категорії транзакцій витрат проекту.

### <a name="power-query"></a>Power Query

Для виконання цих завдань ви маєте використовувати Microsoft Power Query у шаблоні кошторисів витрат проекту:

- Виконайте фільтрування, щоб отримати записи лише рядків кошторисів витрат.
- Задайте ідентифікатор моделі прогнозування за замовчуванням, який використовуватиметься, коли в процесі інтеграції створюватимуться нові прогнози часу.
- Трансформуйте типи рахунків.
- Трансформуйте типи транзакцій.

#### <a name="filter-to-include-only-expense-estimate-lines"></a>Виконайте фільтрування, щоб отримати лише рядки кошторисів витрат.

Шаблон кошторису витрат проекту (PSA до Fin і Ops) має фільтр за замовчуванням, який включає до інтеграції лише рядки витрат. Цей фільтр слід додати в разі створення власного шаблона. Виберіть завдання **Зв’язок між транзакціями**, потім клацніть стрілку **Карта**, щоб відкрити зіставлення. Виберіть посилання **Розширений запит і фільтрування**. Виконайте фільтрування стовпця **msdyn\_transactiontype1**, щоб у ньому залишалися лише **msdyn\_estimateline**.

#### <a name="set-the-default-forecast-model-id"></a>Задайте ідентифікатор моделі прогнозу за замовчуванням

Щоб оновити ідентифікатор моделі прогнозу за замовчуванням у шаблоні, виберіть завдання **Кошториси витрат**, потім клацніть стрілку **Карта**, щоб відкрити зіставлення. Виберіть посилання **Розширений запит і фільтрування**.

- Якщо ви використовуєте шаблон кошторисів витрат проекту за замовчуванням (PSA до Fin і Ops), у Power Query спочатку виберіть останню **Вставлену умову** в розділі **Застосовані кроки**. У записі **Функція** замініть **O\_forecast** назвою ідентифікатора моделі прогнозу, яку слід використовувати з цією інтеграцією. У шаблоні за замовчуванням є ідентифікатор моделі прогнозу, взятий із демонстраційних даних.
- Необхідно додати цей стовпець, якщо ви створюєте новий шаблон. У Power Query виберіть **Додати умовний стовпець**, потім введіть ім’я нового стовпця, наприклад, **ModelID**. Введіть умову для стовпця, де, якщо ідентифікатор рядка кошторису не є null-значенням, тоді \<enter the forecast model ID\>; в іншому разі null-значення.

#### <a name="transform-the-billing-types"></a>Трансформуйте типи рахунків

У шаблоні кошторисів витрат за проектом (PSA до Fin і Ops) є умовний стовпець, який використовується для трансформації типів виставлення рахунків, які отримуються від Project Service Automation під час інтеграції. Цей умовний стовпець слід додати в разі створення власного шаблона. Виберіть посилання **Розширений запит і фільтрування**, потім виберіть **Додати умовний стовпець**. Введіть ім'я нового стовпця, наприклад, **Тип виставлення рахунків**. Потім введіть наведену далі умову:

Якщо **msdyn\_billingtype** = 192350000, тоді **Не підлягає оплаті**,  
у іншому разі, якщо **msdyn\_billingtype** = 192350001, тоді **Підлягає оплаті**,  
у іншому разі, якщо **msdyn\_billingtype** = 192350002, тоді **Додатковий**  
у іншому разі **Не доступно**

#### <a name="transform-the-transaction-types"></a>Трансформуйте типи транзакцій

У шаблоні кошторисів витрат за проектом (PSA до Fin і Ops) є умовний стовпець, який використовується для трансформації типів транзакцій, які отримуються від Project Service Automation під час інтеграції. Цей умовний стовпець слід додати в разі створення власного шаблона. Виберіть посилання **Розширений запит і фільтрування**, потім виберіть **Додати умовний стовпець**. Введіть ім'я нового стовпця, наприклад, **Тип транзакції**. Потім введіть наведену далі умову:

Якщо **msdyn\_transactiontypecode** = 192350000, тоді **Вартість**  
у іншому разі **msdyn\_transactiontypecode** = 192350005, тоді **Збут**  
у іншому разі **null-значення**

### <a name="template-mapping-in-data-integration"></a>Зіставлення шаблонів у інтеграції даних

Наведені далі ілюстрації показують приклади зіставлення завдань шаблону в інтеграції даних. У зіставленні показано інформацію поля, яку буде синхронізовано з Project Service Automation до Finance.

[![Зіставлення шаблону оціночних транзакцій за витратами](./media/ExpenseEstimateTransactionRelationshipsMapping.jpg)](./media/ExpenseEstimateTransactionRelationshipsMapping.jpg)

[![Зіставлення шаблону орієнтовних показників витрат](./media/ExpenseEstimatesMapping.jpg)](./media/ExpenseEstimatesMapping.jpg)


[!INCLUDE[footer-include](../includes/footer-banner.md)]