---
title: Підготовка нового середовища
description: У цьому розділі наведено відомості про підготовку нового середовища Project Operations.
author: sigitac
ms.date: 12/11/2020
ms.topic: article
ms.prod: ''
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: d0712d9d5dfc6c35ccd07142ff5948f50e6a254c
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: uk-UA
ms.lasthandoff: 05/10/2021
ms.locfileid: "5995511"
---
# <a name="provision-a-new-environment"></a>Підготовка нового середовища

_**Застосовується до:** Project Operations для сценаріїв на основі ресурсів і відсутності запасів_

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

У цьому розділі наведено відомості про підготовку нового середовища Dynamics 365 Project Operations для сценаріїв на основі ресурсів/нескладських матеріалів.

## <a name="enable-project-operations-automated-provisioning-in-an-lcs-project"></a>Увімкнення автоматичної підготовки Project Operations у проекті LCS

Виконайте такі кроки, щоб увімкнути автоматизований цикл підготовки Project Operations для проекту LCS.

1. Відкрийте [LCS](https://lcs.dynamics.com/v2) і виберіть плитку **Керування підготовчою функцією**.
2. У списку **Функція підготовчої версії** виберіть розділ **Функція Project Operations**, потім виберіть розділ **Функція підготовчої версії увімкнена**, щоб увімкнути Project Operations.

> [!NOTE]
> Цей крок виконується для проекту LCS лише один раз.

## <a name="provision-a-project-operations-environment"></a>Підготовка середовища Project Operations

1. Відкрийте нове розгортання [демо-середовища](/dynamics365/fin-ops-core/dev-itpro/deployment/deploy-demo-environment) або [робочого/ізольованого програмного середовища](/dynamics365/fin-ops-core/dev-itpro/deployment/deployenvironment-newinfrastructure) Dynamics 365 Finance. 
2. Виконайте вказівки майстра **Підготовка середовища**. 

> [!IMPORTANT]
> Переконайтеся, що вибрано програму версії 10.0.13 або новішої.

3. Щоб підготувати Project Operations, у розділі **Додаткові параметри** виберіть **Common Data Service**. 
4. Увімкніть **Параметр Common Data Service**, вибравши **Так**, а потім введіть дані в обов’язкових полях:

  - Ім'я
  - Область
  - Language
  - Валюта
 
5. У полі **Шаблон Common Data Service** виберіть **Project Operations** 

6. Виберіть тип середовища для розгортання. Ознайомлювальна версія на основі передплати дасть змогу розгортати середовище CDS протягом 30 днів. 

![Параметри розгортання](./media/1DeploymentSettings.png)

> [!IMPORTANT]
> Виберіть **Погоджуюся**, щоб прийняти умови надання послуг, а потім натисніть кнопку **Готово**, щоб повернутися до параметрів розгортання.

![Згода на розгортання](./media/2DeploymentConsent.png)

7. Необов'язково. Застосовуйте демо-дані до середовища. Відкрийте меню **Розширені настройки**, натисніть **Налаштувати конфігурацію бази даних SQL**, і встановіть для параметру **Визначити набір даних для бази даних програми** значення **Демонстраційна версія**.

8. Заповніть решту полів у майстрі та підтвердьте розгортання. Час підготовки середовища залежить від типу середовища. Підготовка може тривати до шести годин.

  Після завершення розгортання середовище відображатиметься як **Розгорнуте**.

9. Щоб підтвердити успішне розгортання середовища, виберіть **Вхід до системи** і ввійдіть до середовища, щоб підтвердити це середовище.

![Відомості про середовище ](./media/3EnvironmentDetails.png)

## <a name="apply-updates-to-the-finance-environment"></a>Застосування оновлень до середовища Finance

Для Project Operations потрібне середовище Finance із програмою версії **10.0.13 (10.0.569.20009)** або пізнішої.

Щоб отримати цю версію, можливо, потрібно буде застосувати покращення до середовища Finance.

1. У LCS на сторінці **Відомості про середовище** у розділі **Доступні оновлення** виберіть **Переглянути оновлення**.

![Перегляд оновлень](./media/5ViewUpdates.png)

2. На сторінці **Двійкові оновлення** виберіть **Зберегти пакет**.

![Зберегти пакет](./media/6SavePackage.png)

3. Клацніть **Вибрати всі**, а потім виберіть **Зберегти пакет**.

![Перегляд і збереження оновлень](./media/7ReviewAndSaveUpdates.png)

4. Введіть ім’я та опис пакета, а потім натисніть кнопку **Зберегти**. Залежно від з’єднання з Інтернетом цей процес може тривати певний час.

![Передавання пакета до бібліотеки активів](./media/8UploadPackageToAssetsLibrary.png)

5. Після того, як пакет буде збережено, виберіть **Готово** та збережіть цей пакет у бібліотеці активів у проекті LCS.

Збереження та перевірка пакета може тривати близько 15 хвилин.

6. Щоб застосувати оновлення, перейдіть на сторінку **Відомості про середовище** в LCS і виберіть **Підтримувати** > **Застосувати оновлення**.

![Підтримування середовищ](./media/9MaintainEnvironment.png)

7. У списку оновлень виберіть створений пакет, а потім виберіть **Застосувати**.

![Застосування оновлень](./media/10ApplyUpdates.png)

Обслуговування середовища триватиме певний час. Після завершення середовище повернеться до розгорнутого стану.

![Середовище розгорнуто](./media/11EnvironmentDeployed.png)

## <a name="establish-a-dual-write-connection"></a>Установлення підключення подвійного записування 

1. У проекті LCS перейдіть на сторінку **Відомості про середовище**.
2. У розділі **Відомості про середовище Common Data Service** виберіть **Зв’язати із CDS для програм**.
3. Після завершення зв’язування виберіть **Зв’язати із CDS для програм** ще раз. Вас буде переспрямовано на подвійне записування у Finance.

![Зв’язування із CDS](./media/12LinktoCDS.png)

4. Виберіть **Застосувати рішення**, щоб отримати доступ до сутностей, які буде зіставлено в інтеграції.

![Застосування рішень](./media/13ApplySolutions.png)

5. Виберіть обидва рішення, **Подвійне записування зіставлень сутностей Dynamics 365 Finance and Operations** та **Зіставлень сутностей подвійного записування Dynamics 365 Project Operations**, а потім натисніть кнопку **Застосовувати**.

![Підтвердження рішень](./media/14ConfirmSolutions.png)

Після застосування рішень сутності подвійного записування будуть застосовані до середовища.

![Застосування рішень](./media/15ApplyingSolutions.png)

Після застосування сутностей у середовищі вказуються всі доступні зіставлення.

![Карти подвійного записування](./media/15DWMappings.png)

## <a name="refresh-the-data-entities-after-the-update"></a>Оновлення сутностей даних після оновлення

1. У Finance перейдіть до робочої області **Керування даними**.

![Робоча область "Керування даними"](./media/16DataManagement.png)

2. Виберіть плитку **Параметри платформи**.

![Параметри платформи](./media/17FrameworkParameters.png)

3. На сторінці **Параметри сутності** виберіть **Оновити список сутностей**.

![Оновлення списку сутностей](./media/18RefreshEntityList.png)

Оновлення буде тривати приблизно 20 хвилин. Після завершення ви отримаєте сповіщення.

![Підтвердження оновлення](./media/19RefreshConfirmation.png)

## <a name="update-security-settings-on-project-operations-on-dataverse"></a>Оновлення параметрів безпеки для Project Operations у Dataverse

1. Відкрийте Project Operations у вашому середовищі Dataverse. 
2. Перейдіть до **Налаштування** > **Безпека** > **Ролі безпеки**. 
3. На сторінці **Ролі безпеки** у списку ролей натисніть **користувач програми подвійного записування** і виберіть вкладку **Настроювані сутності**.  
4. Переконайтеся, що для ролі є дозволи **Читання** і **Додавання до** для:
      
      - **Тип курсу обміну валют**
      - **Діаграма рахунків**
      - **Фінансовий календар**
      - **Книга**

5. Після оновлення ролі безпеки відкрийте меню **Настройки** > **Безпека** > **Робоча група** і виберіть робочу групу за замовчуванням у поданні робочої групи **Відповідальна робоча група в місцевому відділенні**.
6. Натисніть **Керування ролями** і перевірте, що для цієї робочої групи застосовано право безпеки **користувач програми подвійного записування**.

## <a name="run-project-operations-dual-write-maps"></a>Виконання зіставлення для подвійного записування в Project Operations

1. У проекті LCS перейдіть на сторінку **Відомості про середовище**.
2. У розділі **Відомості про середовище Common Data Service** виберіть **Зв’язати із CDS для програм**. Після вибору зв’язку вас буде переспрямовано до списку сутностей у зіставленнях.
3. Запустіть зіставлення, як описано в наведеній нижче таблиці. Обов’язково дотримуйтеся послідовності у списку.

| **Зіставлення сутностей** | **Оновлення сутності** | **Початкова синхронізація** | **Основний для початкової синхронізації** | **Запуск необхідних компонентів** | **Початкова синхронізація необхідних компонентів** |
| --- | --- | --- | --- | --- | --- |
| **Ролі ресурсів проекту для всіх компаній (bookableresourcecategories)** | No | Так | Common Data Service | No | Н/Д |
| **Юридичні особи (cdm\_companies)** | No | Так | Програми Finance and Operations | No | Н/Д |
| **Леджер (msdyn_ledgers)** | No | Так | Програми Finance and Operations | Так | Так, програми Finance and Operations |
| **Фактичні дані про інтеграцію Project Operations (msdyn\_actuals)** | No | No | Н/Д | Так | No |
| **Проектні сервісні роботи за договором (salesorderdetails)** | No | No | Н/Д | No | No |
| **Сутність інтеграції для зв'язків між транзакціями проекту (msdyn\_transactionconnections)** | No | No | Н/Д | No | Н/Д |
| **Проміжні етапи сервісної роботи за договором інтеграції Project Operations (msdyn\_contractlinesscheduleofvalues)** | No | No | Н/Д | No | Н/Д |
| **Сутність інтеграції Project Operations для орієнтовних показників витрат (msdyn\_estimateslines)** | No | No | Н/Д | No | Н/Д |
| **Сутність експорту категорій витрат за проектом інтеграції Project Operations (msdyn\_expensecategories)** | No | No | Н/Д | No | Н/Д |
| **Сутність експорту витрат за проектом інтеграції Project Operations (msdyn\_expenses)** | Так | No | Н/Д | No | Н/Д |
| **Сутність інтеграції Project Operations для оцінки часу (msdyn\_resourceassignments)** | Так | No | Н/Д | No | Н/Д |


4. Щоб оновити сутність, виберіть назву зіставлення, а потім виберіть **Оновити сутності**. 


![Оновлення зіставлення](./media/20RefreshMapping.png)

5. Після закінчення оновлення запустіть карту. Перш ніж вмикати наступне зіставлення, переконайтеся, що зіставлення в таблиці перебуває в стані **Виконується**. Запуск зіставлень із більшою кількістю необхідних компонентів може тривати певний час.

Щоб виконати зіставлення з необхідними компонентами, увімкніть перемикач **Показати пов’язані зіставлення сутностей**. Якщо в таблиці для параметра **Початкова синхронізація необхідних компонентів** вказано **Ні**, переконайтеся, що прапорець **Початкова синхронізація** має значення **Вимкнуто** у всіх цих зіставленнях необхідних компонентів, перш ніж запускати його.

![Запуск зіставлення](./media/21RunMap.png)

6. Перевірте всі пов’язані з проектом зіставлення, які виконуються.

![Усі зіставлення, що виконуються](./media/22AllMapsRunning.png)


## <a name="apply-configuration-data-in-cds-for-project-operations-optional"></a>Застосування даних конфігурації в CDS для Project Operations (необов’язково)

Якщо для середовища Finance було застосовано демонстраційні дані, див. розділ [Налаштування та застосування даних конфігурації у Common Data Service для Project Operations](resource-apply-pro-setup-config-data.md), щоб застосувати демонстраційні дані до середовища CDS.


Середовище Project Operations тепер підготовано та налаштовано. 


[!INCLUDE[footer-include](../includes/footer-banner.md)]