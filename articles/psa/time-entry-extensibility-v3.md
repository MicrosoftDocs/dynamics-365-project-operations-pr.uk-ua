---
title: Настроювання тижневого запису часу
description: У цьому розділі наведено відомості про реалізацію настроюваних бізнес-правил, які підтримують діяльність організації.
author: stsporen
manager: kfend
ms.service: project-operations
ms.custom:
- dyn365-projectservice
ms.date: 07/09/2019
ms.topic: article
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: a34244884bc81da74ae3bf550bde6f982d04abd3
ms.sourcegitcommit: 418fa1fe9d605b8faccc2d5dee1b04b4e753f194
ms.translationtype: HT
ms.contentlocale: uk-UA
ms.lasthandoff: 02/10/2021
ms.locfileid: "5149658"
---
# <a name="customize-weekly-time-entry"></a>Настроювання тижневого запису часу 

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

У Microsoft Dynamics 365 Project Service Automation версії 3.3 корпорація Microsoft запровадила сучасну сітку, яка дає змогу швидко вводити час одразу для цілого тижня. Нова сітка тижневого запису часу може показувати загальну кількість записів за датою, за рядком або за тижнем. Ресурси можуть створювати копії записів часу в межах цього тижня, а також копіювати групу записів з попередніх тижнів. Настроювальники системи можуть настроювати подання, додаючи поля, додаючи підстановки до інших сутностей, а також застосовуючи настроювані бізнес-правила для підтримки діяльності їхньої організації.

На карті сайту доступні записи часу та нова тижнева сітка. Нерозширювана настроювана можливість запису часу, яка була частиною попередніх версій PSA, була замінена на розширювану тижневу сітку запису часу, а також на альтернативну можливість роботи в сітці лише для читання та календарі. Завдяки цим змінам користувач може вводити час тижнями.

## <a name="page-layout"></a>Макет сторінки
Нова тижнева сітка запису часу — це настроюваний елемент керування, який містить панель інструментів і два основні розділи: **Критерії** і **Тривалість**. Панель інструментів містить кнопку, яка застосовується лише до цього настроюваного елемента керування для сітки введення часу. Натомість кнопки в області дії у верхній частині сторінки застосовуються до трьох типів елементів керування для введення часу, які підтримуються: елемент керування «тижневий час», елемент керування «лише для читання» та елемент керування «календар».

### <a name="dimensions"></a>Розміри
У розділі **Критерії** відображаються заголовки стовпців, усі критерії, для яких можна ввести цей час. Наведені нижче критерії підтримуються за замовчуванням:

- Проект
- Проектне завдання
- Роль
- Тип
- Стан запису

У розділі **Критерії** не можна використовувати вбудоване редагування. Цей розділ спирається на подання, яке дає змогу додавати настроювані поля до тижневої сітки запису часу. Для отримання додаткових відомостей про додавання настроюваних полів див. розділ «Можливості розширення» далі в цій темі.

### <a name="duration"></a>Тривалість
У розділі "Тривалість" відображаються дні тижня як заголовки стовпців. У цьому розділі можна використовувати вбудоване редагування. Після створення рядка часу, який має відповідні критерії, користувачі можуть швидко вводити, з допомогою вбудованих елементів, кількість часу, витраченого на ці критерії.

## <a name="create-a-new-time-entry"></a>Створення нового запису часу
Щоб створити новий запис часу в сітці для введення часу, виберіть **Створити.** Відкриється діалогове вікно **Швидке створення запису часу**. У цьому діалоговому вікні користувачі можуть вибрати дату введення часу, а потім ввести дані для **Проекту**, **Завдання проекту**, **Роль** і **Тривалість** у хвилинах, годинах або днях, увівши **h**, **m** або **d** разом із числом. Користувачі також можуть вводити опис і коментарі, які можна поширювати для запису часу. Під час збереження змін у розділі **Критерії** відображаються значення, введені для критеріїв. Відомості про тривалість, введені в полі **Тривалість**, відображаються на даті, коли було створено запис часу.

Поля підстановки підтримуються системними поданнями. Наприклад, після того, як користувач вводить проект, поле **Завдання проекту** буде настроєно на подання **Копіювання** за замовчуванням. Щоб створити записи часу для завдань, які не призначено користувачу, виберіть команду **Змінити подання** в діалоговому вікні підстановки, а потім виберіть подання **Усі активні завдання проекту**.

## <a name="edit-a-time-entry"></a>Редагування запису часу
Відомості з деяких полів на сторінці запису часу, наприклад **Опис** і **Зовнішні коментарі**, не відображаються в тижневій сітці запису часу. Натомість невеликий трикутний індикатор відобразиться в клітинках тривалості, які містять ці додаткові відомості. Виберіть клітинку , а потім виберіть **Змінити дані**, щоб переглянути дані в області **Швидке редагування** . Щоб редагувати або оновлювати відомості для певного запису часу, який не є частиною тижневої сітки запису часу, користувачі мають відкрити область **Швидке редагування**.

## <a name="copy-a-time-entry-row"></a>Копіювання рядка запису часу
Після створення першого рядка запису часу користувач може вибрати **Копіювати рядок**, щоб скопіювати весь рядок до нового рядка. Коли рядок копіюється таким чином, критерії та тривалість також копіюються. Користувачі також можуть вибрати **Редагувати рядок**, щоб оновити значення критеріїв та тривалості в розділі **Тривалість**.

## <a name="open-a-time-entry"></a>Відкрити запис часу
Щоб підтримати оптимальне та швидке входження в найбільш популярних полях, в тижневій сітці запису відображаються підгрупи вибраних критеріїв і тривалості часу. Щоб переглянути всі відомості про один запис часу , в області **Редагувати запис** виберіть **Відкрити**.

## <a name="submit-a-time-entry"></a>Надіслати запис часу
Користувачі можуть надсилати один запис часу або групу записів часу, вибравши блок клітинок або весь рядок запису часу, а потім вибравши команду **Надіслати**. Надіслані записи часу відображаються як записи, що очікують на затвердження на сторінці **Затвердження**. Після успішного надсилання записів їх не можна редагувати.

## <a name="recall-a-time-entry"></a>Відкликати запис часу
Можна відкликати надіслані записи часу. Можна відкликати один запис часу, блок записів часу або цілий рядок записів часу. Відкликані записи часу доступні ресурсам для редагування.

## <a name="time-entry-status"></a>Стан запису часу
Нові записи часу автоматично отримують статус **Чернетка**. Під час надсилання запису, стан оновлюється до **Надіслано**. Коли надісланий запис затверджується, його стан оновлюється до **Затверджено**. Якщо запис відхиллено, його стан буде змінено на **Повернуто**, а запис стане доступним для виправлення та повторного надсилання. Можна видаляти лише записи часу, які мають статус **Чернетка**.

## <a name="view-rejection-comments"></a>Див. примітки до відхилення
Після відмови затверджувача, він може додати примітки щодо відмови, щоб ресурс міг зрозуміти причину відмови. Щоб переглянути коментарі до відхилення запису, виберіть **Відкрити запис**. Коментарі до відхилення будуть показані на часовій шкалі. На часовій шкалі цей ресурс може відреагувати на коментарі у відхиленні, перш ніж повторно надіслати запис.

## <a name="copy-week"></a>Копіювати тиждень
Після того, як було створено кілька записів часу, користувачі можуть вибрати **Копіювати тиждень** для створення групи додаткових записів часу. Відкриється діалогове вікно **Копіювати**. У розділі **Від періоду** використайте поля **Дата початку** і **Дата завершення**, щоб визначити діапазон дат, з яких слід копіювати записи часу. У розділі **До періоду** у полі **Дата початку** укажіть дату, для якої слід створити записи часу. Потім натисніть **Копіювати**. Для вказаної дати в період «до» створюється копія записів часу для відповідного дня тижня в періоді «від». Наприклад, запис часу в понеділок минулого тижня копіюється на понеділок тижня, указаного у періоді «до».

## <a name="import"></a>Імпорт
Такий самий базовий процес використовується для імпортування із резервувань, призначень і обмінів. Користувачі можуть задати діапазон дат, з яких імпортуються резервування. Потім вони мають чітко вибрати резервування, які слід копіювати в записи часу, що створені як чернетка. У попередньому випуску запропоновані записи часу з'являлися в сітці та календарі, і втрачалися під час оновлення сеансу.

## <a name="extensibility"></a>Розширення
### <a name="add-custom-fields-that-have-lookups-to-other-entities"></a>Додавання настроюваних полів, які містять пошук для інших сутностей
Існує три основні кроки, щоб додати настроюване поле до сітки щотижневого запису часу.

1.  Додайте настроюване поле до діалогового вікна швидкого створення.
2.  Настройте сітку, щоб показати настроюване поле.
3.  Додайте настроюване поле до потоку завдань редагування рядка або потоку завдань редагування клітинки відповідно.

Крім того, необхідно переконатися, що в новому полі є необхідні перевірки в потоці завдань редагування рядка або клітинки. У межах цього кроку потрібно заблокувати поле, залежно від стану запису часу.

#### <a name="add-the-custom-field-to-the-quick-create-dialog-box"></a>Додайте настроюване поле до діалогового вікна швидкого створення
Слід додати настроюване поле до діалогового вікна швидкого створення запису часу. щоб користувачі мали змогу ввести для нього значення, коли вони додають записи часу за допомогою кнопки **Створити**.

#### <a name="configure-the-grid-to-show-the-custom-field"></a>Настройте сітку, щоб показати настроюване поле
Існує два способи додавання настроюваного поля до тижневої сітки записів часу. Перший спосіб – це налаштувати подання **Мої тижневі записи часу** та додати до нього настроюване поле. Можна вибрати розташування та розмір настроюваного поля в сітці, редагуючи ці властивості в поданні.

Другий спосіб – створити нове подання для настроюваного запису часу та задати його як подання за замовчуванням. Це подання має містити поля **Опис** та **Зовнішні примітки**, а також стовпці, які потрібно додати до сітки. Можна вибрати позицію, розмір і порядок сортування за замовчуванням у сітці, редагуючи ці властивості в поданні. Далі змініть настроюваний елемент керування для цього подання, щоб він став елементом керування **Сітка для введення часу**. Додайте цей елемент керування до подання та виберіть його для веб-сайту, телефону та планшета. Потім настройте параметри для тижневої сітки запису часу. Встановіть поле **Дата початку** у значення **msdyn_date**, поле **Тривалість** у значення **msdyn_duration**, а також поле **Стан** у значення **msdyn_entrystatus**. Для подання за замовчуванням поле **Список стану лише для читання** має значення **192350002, 192350003, 192350004**, поле **Потік завдань редагування рядка** – **msdyn_timeentryrowedit**, а поле **Потік завдань редагування клітинки** – значення **msdyn_timeentryedit**. Ці поля можна настроїти, щоб додати або усунути стан лише для читання, або використати інший можливості на основі завдань (TBX) для редагування рядка або клітинки. Ці поля слід прив'язати до статичного значення.

#### <a name="add-the-custom-field-to-the-appropriate-edit-task-flow"></a>Додавання настроюваного поля до відповідного потоку завдань редагування
Сторінки TBX, що використовуються для редагування, можна знайти в області **Процеси**. Сторінки за замовчуванням — **Project Service - Редагування рядка запису часу** та **Project Service - редагування запису часу**. Можна редагувати ці сторінки за замовчуванням або створити нову користувацьку сторінку TBX.

> [!NOTE] 
> Обидва параметри видаллять деякі готові елемент фільтрації у сутностях **Проект** та **Завдання проекту**, щоб усі подання підстановки для сутностей були видимими. У полі відображаються лише відповідні подання підстановки.

Слід визначити відповідний потік завдань для настроюваного поля. Скоріш за все, якщо поле було додано до сітки, його слід додати до потоку завдань редагування рядка, який використовується для полів, які застосовуються до цілого рядка записів часу. Якщо настроюване поле має унікальне значення щодня, наприклад настроюване поле для **Часу завершення**, його слід змінити у потоці завдання редагування клітинки.

Щоб додати настроюване поле до потоку завдань, перетягніть елемент **Поле** до відповідної позиції на сторінці, а потім настройте його властивості. Установіть параметр **Джерело** у значення **Запис часу** і настройте властивість **Поле даних** на настроюване поле. Властивість **Поля** визначає коротке ім'я на сторінці TBX. Натисніть кнопку **Застосувати**, щоб зберегти зміни в полі. Потім натисніть кнопку **Оновити**, щоб зберегти зміни на сторінці.

Для використання нової настроюваної сторінки TBX, створіть новий процес. Укажіть категорію для **Потік бізнес-процесу**, установіть сутність у **Запис часу** та встановіть тип бізнес-процесу у **Виконання процесу як потоку завдань**. У розділі **Властивості** властивість **Ім’я сторінки** має бути задано для відображення імені сторінки. Додайте всі відповідні поля до сторінки TBX. Збережіть і активуйте процес, а потім оновіть настроювану властивість елемента керування для відповідного потоку завдань у значення **Ім’я** у процесі.

### <a name="add-new-option-set-values"></a>Додайте новий набір параметрів
Щоб додати значення набору параметрів до готового поля, відкрийте сторінку редагування для поля, а потім в області **Тип** виберіть **Змінити** поряд з набором параметрів. Потім додайте новий параметр, який має власний підпис і колір. Якщо потрібно додати новий стан запису часу, готове поле матиме **Стан запису**, а не **Стан**.

### <a name="designate-a-new-time-entry-status-as-read-only"></a>Призначення новому запису часу стану лише для читання
Щоб призначити новий статус запису «тільки для читання», додайте нове значення запису часу (число, а не підпис) до властивості **Список станів лише для читання**. Для рядків, які мають новий статус, змінювана частина сітки запису часу буде заблокована.
Потім додайте бізнес-правила, щоб заблокувати всі поля на сторінках TBX **Редагування рядка запису часу** та **Редагування запису часу**. Можна отримати доступ до бізнес-правил для цих сторінок, відкривши редактор потоку бізнес-процесу для сторінки, а потім вибравши **Бізнес-правила**. Можна додати новий стан до умови в наявних бізнес-правилах або додати нове бізнес-правило для нового стану.

### <a name="add-custom-validation-rules"></a>Додавання настроюваних правил перевірки
Існує два типи правил верифікації, які можна додати для тижневої сітки часу. • клієнтські бізнес-правила, які працюють у діалогових вікнах швидкого створення та на сторінках TBX • зовнішні перевірки на сервері, які застосовуються до всіх оновлень записів часу

#### <a name="business-rules"></a>Бізнес-правила
За допомогою бізнес-правил можна блокувати та розблоковувати поля, вводити значення за замовчуванням у полях, а також визначати перевірки, які потребують даних лише з поточного запису часу. Можна отримати доступ до бізнес-правил для сторінок TBX, відкривши редактор потоку бізнес-процесів для сторінки, а потім вибравши **Бізнес-правила**. Тоді можна змінити наявні бізнес-правила або додати нове бізнес-правило. Щоб додати ще кілька настроюваних можливостей перевірки, можна використовувати бізнес-правило для виконання JavaScript.

#### <a name="plug-in-validations"></a>Перевірка компонента Plug-in
Слід використовувати перевірки компонента plug-in для будь-яких перевірок, які потребують більше контексту, ніж доступно в одному записі часу, або для будь-яких перевірок, які потрібно виконати з вбудованими оновленнями в сітці. Щоб виконати перевірку, створіть настроюваний компонент plug-in для сутності **Запис часу**.

> [!IMPORTANT] 
> В даний час відома проблема на сторінках TBX забороняє користувачам виправляти інформацію та повторно натискати "Готово", коли оновлення не вдасться перевірити за допомогою компонента plug-in. Як вирішення проблеми, настройте перевірку бізнес-правил, щоб уникнути такої ситуації.


[!INCLUDE[footer-include](../includes/footer-banner.md)]