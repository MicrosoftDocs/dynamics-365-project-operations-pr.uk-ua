---
title: Як налаштувати потік бізнес-процесу стадій проекту?
description: Огляд налаштування потоку бізнес-процесу стадій проекту.
manager: kfend
ms.service: project-operations
ms.custom:
- dyn365-projectservice
ms.date: 10/11/2018
ms.topic: article
author: JohnPBurrows
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: 1d0168f187e6b0880713aac04bd87dbc2209197d
ms.sourcegitcommit: 418fa1fe9d605b8faccc2d5dee1b04b4e753f194
ms.translationtype: HT
ms.contentlocale: uk-UA
ms.lasthandoff: 02/10/2021
ms.locfileid: "5149028"
---
# <a name="how-do-i-customize-the-project-stages-business-process-flow"></a>Як налаштувати потік бізнес-процесу стадій проекту?

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-2-4x-9-0-platform](../includes/cc-applies-to-psa-app-2-4x-9-0-platform.md)]
[!INCLUDE[cc-applies-to-psa-app-1x-8-2-platform](../includes/cc-applies-to-psa-app-1x-8-2-platform.md)]

У попередніх версіях програми Project Service є відоме обмеження, що назви стадій у потоці бізнес-процесів стадій проекту мають точно збігатися з очікуваними назвами англійською мовою (**Quote**, **Plan**, **Close**). В іншому разі бізнес-логіка, яка використовує назви стадій англійською, не працюватиме належним чином. Тому не відображаються знайомі дії, такі як **Перемкнути процес** або **Змінити процес** у формі проекту, а настроювання потоку бізнес-процесу не рекомендується. 

Це обмеження було виправлене у версії 2.4.5.48 і новіших. У цій статті наведено рекомендації для вирішення проблеми, коли вам потрібно настроїти потік бізнес-процесу за замовчуванням у попередніх версіях.  

## <a name="business-logic-requires-an-exact-match-with-english-stage-names"></a>Бізнес-логіка вимагає точну відповідність з назвами стадій англійською

На стадії проекту потік бізнес-процесу включає в себе бізнес-логіку, яка керує вказаними поведінками у програмі:
- Якщо проект пов'язаний з ціновою пропозицією, то код встановлює потік бізнес-процесу у стадію **Quote**.
- Якщо проект пов'язаний з сервісним договором, то код встановлює потік бізнес-процесу у стадію **Plan**.
- Якщо потік бізнес-процесу є розширеним до стадії **Close**, запис проекту буде вимкнуто. Коли проект вимкнуто, форма проекту та робоча структура проекту (WBS) встановлюється у режим тільки для читання, випускаються вказані бронювання ресурсів, а будь-які пов'язані прайси вимикаються.

Ця бізнес-логіка покладається на англійські назви для стадій проекту. Ця залежність від англійських назв є основною причиною, чому настроювання потоку бізнес-процесу стадій проекту не рекомендується, а також чому не відображаються спільні дії потоку бізнес-процесів, наприклад, **Перемкнути процес** або **Змінити процес** у сутності проекту.

## <a name="what-happens-if-the-stage-names-dont-match-the-english-names"></a>Що станеться, якщо назви стадій не збігаються з англійськими назвами?

У версії програми Project Service 1.x на платформі 8.2, якщо назва стадії потоку бізнес-процесу точно не збігається з англійською назвою стадії, бізнес-логіка, яка задає потрібну стадію для цінових пропозицій або угод, або, закриває проект, не виконується. Повідомлення про помилку не відображаються. Тому виглядає так, ніби ви можете настроїти потік бізнес-процесу стадій процесу. Однак, ви не зможете побачити жодні автоматичні процеси, що працюють для цінових пропозицій, угод і закриття проектів.

У версії програми Project Service 2.4.4.30 або старішої на платформі 9.0 було багато суттєвих змін архітектури у потоках бізнес-процесів, які вимагали переписати бізнес-логіку потоку бізнес-процесу. Відтак, якщо назви стадії процесу не відповідають очікуваним назвам англійською, з'явиться повідомлення про помилку. 

Тому, якщо потрібно настроїти потік бізнес-процесу стадії проекту для сутності проекту, можна лише додати абсолютно нові стадії до потоку бізнес-процесу за замовчуванням для цієї сутності проекту, зберігаючи стадії **Quote**, **Plan** і **Close** як є. Це обмеження гарантує, що не виникатимуть помилки бізнес-логіки, яка очікує англійські назви стадій у потоці бізнес-процесу.

У 2.4.5.48 та новіших версіях бізнес-логіка, описана в цій статті, була видалена з потоку бізнес-процесу за замовчуванням для сутності проекту. Оновлення до цієї версії або новішої дасть змогу настроїти або замінити потік бізнес-процесу за замовчуванням на свій власний. 

## <a name="workarounds-for-earlier-versions"></a>Вирішення проблеми для старіших версій

Якщо оновлення не варіант, можна настроїти потік бізнес-процесу стадії проекту для сутності проекту двома способами:

1. Додайте додаткові стадії до конфігурації за замовчуванням, зберігаючи англійські назви стадії для **Quote**, **Plan** і **Close**.


![Знімок екрана з додавання стадій до конфігурації за замовчуванням](media/FAQ-Customize-BPF-1.png)
 
2. Створіть власний потік бізнес-процесу і зробіть його основним потоком бізнес-процесу для сутності проекту, що дає змогу присвоїти будь-які потрібні вам назви стадії. Проте, якщо потрібно використати ті самі стандартні стадії проекту – **Quote**, **Plan** і **Close**, потрібно ввести кілька настроювань, які відрізняються від ваших стандартних назв стадії. Більш складна логіка є у закритті проекту, яке ви все ще можете викликати простим вимкненням запису проекту.

![Настроювання BPF](media/FAQ-Customize-BPF-2.png)

### <a name="additional-considerations-for-project-service-app-version-24430-or-earlier-on-platform-90"></a>Ще кілька порад для версії програми Project Service 2.4.4.30 або старішої на платформі 9.0

У Project Service версії 2.4.4.30 або старішої на платформі 9.0, із користувацьким потоком бізнес-процесів поля **Назва стадії** у сутності проекту, що використовується в діаграмі **Проект за стадією** та поданні списку проекту, не оновлюватимуться, оскільки вони пов'язані зі стандартним потоком бізнес-процесу стадій проекту. Це можна виправити, виконавши такі кроки:

- Додайте настроюване поле для запису поточної стадії потоку бізнес-процесу, що оновлюється по мірі того, як користувач просувається настроюваним потоком бізнес-процесу.

- Змініть діаграму **Проект за стадією** для роботи з настроюваним полем замість конфігурації за замовчуванням.

### <a name="steps-to-create-your-own-business-process-flow-for-the-project-entity"></a>Кроки створення власного потоку бізнес-процесу для сутності проекту

Для створення власного потоку бізнес-процесу для сутності проекту, виконайте такі дії:

1. Виберіть **Настройки** > **Центри процесів**. Не копіюйте потік бізнес-процесу стадій проекту, оскільки це також скопіює бізнес-логіку Project Service.

  ![Створіть процес](media/FAQ-Customize-BPF-3.png)

2. Для створення потрібних назв стадій використовуйте конструктор процесу. Якщо вам потрібні ті самі функції, що у стадій за замовчуванням для **Quote**, **Plan** і **Close**, буде потрібно створити їх на основі настроюваних назв стадій бізнес-процесів.

   ![Знімок екрана з конструктора процесу, що використовується для настроювання ПБП](media/FAQ-Customize-BPF-4.png) 

3. У конструкторі процесу натисніть кнопку **Упорядкувати потік процесу,** щоб зробити настроюваний потік бізнес-процесу основним потоком для сутності проекту, перемістивши його вище потоку бізнес-процесу стадій проекту угору списку.


   [Знімок екрана з використанням потоку процесу замовлення](media/FAQ-Customize-BPF-5-720.png)

### <a name="the-following-steps-apply-to-project-service-app-24430-or-earlier-on-the-90-platform"></a>Наступні кроки стосуються програми Project Service 2.4.4.30 або старішої версії на платформі 9.0

4. Додайте настроюване поле до сутності проекту, щоб зберігати настроювані стадії в користувацькому потоку бізнес-процесу. Необхідно буде додати бізнес-логіку (модуль/робочий цикл), щоб змінити це поле, коли стадія у настроюваному потоці бізнес-процесу оновиться.

   ![Знімок екрана з настроювання сутності проекту](media/FAQ-Customize-BPF-6-720.png)

5. Змініть діаграму **Проект за стадією**, щоб використовувати нове настроюване поле для стадій.

   ![Знімок екрана за використання діаграми проектів за стадіями](media/FAQ-Customize-BPF-7-720.png)

6. Змініть будь-які подання для сутності проекту, щоб включити нове настроюване поле для стадій.

   ![Знімок екрана змінення подання сутності проекту](media/FAQ-Customize-BPF-8-720.png)

