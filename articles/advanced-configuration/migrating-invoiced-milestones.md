---
title: Перенесення етапів виставлення рахунків із повністю встановленими рахунками під час скорочення
description: У цій статті пояснюється, як перенести етапи виставлення рахунків із фіксованою ціною, які були виставлені клієнту за відкриті контракти на проект до дати запуску.
author: sigitac
ms.date: 01/10/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: 05cd71f9860b5698e3a26bc72660b0b2044206c8
ms.sourcegitcommit: a798fed5c59e3fefa62cdfa42c852d529b33fd35
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 06/18/2022
ms.locfileid: "9028727"
---
# <a name="migrate-fully-invoiced-billing-milestones-at-cutover"></a>Перенесення етапів виставлення рахунків із повністю встановленими рахунками під час скорочення

_**Застосовується до:** Project Operations для сценаріїв на основі ресурсів і відсутності запасів_

## <a name="scenario"></a>Сценарій

Contoso буде працювати з Microsoft Dynamics 365 Project Operations для сценаріїв із ресурсами/відсутністю запасів. В рамках скорочених заходів команда впровадження повинна перенести відкриті контракти на проекти зі старої системи. Деякі з проектних контрактів включають контрактні лінії, які використовують метод виставлення рахунків за фіксованою ціною і вже частково виставлені кінцевому замовнику. Команда впровадження повинна перенести ці етапи виставлення рахунків як **опублікований** рахунок-фактуру клієнта, оскільки вони повинні бути включені до загальної вартості контракту для цілей визнання доходу. Однак баланси клієнтів у дебіторській заборгованості та Загальній книзі не повинні впливати.

## <a name="solution"></a>Рішення

### <a name="prerequisites"></a>вимоги

- Dynamics 365 Finance 10.0.24 або новішої версії.
- Середовище, де будуть виконані етапи міграції, має бути в режимі обслуговування. Під час перенесення етапів не слід виконувати жодних інших дій.
- Кроки міграції повинні виконуватися точно так, як описано тут, і можуть бути використані лише для скорочення діяльності. Корпорація Майкрософт не підтримує жодного іншого використання цієї можливості.

### <a name="create-a-cutover-version-of-the-project-operations-integration-contract-line-milestones-dual-write-map"></a>Створення скороченої версії проміжних етапів контракту на інтеграцію операцій проекту з картою подвійного запису 

1. Переконайтеся, що зіставлення цілей для **суб'єкта етапів контракту** на інтеграцію операцій проекту оновлено. 

    1. У розділі Фінанси перейдіть до **розділу Керування даними** \> **сутності** даних і виберіть **сутність етапу контракту** на інтеграцію операцій проекту. 
    2. Виберіть " **Змінити цільові зіставлення"**. 
    3. **На сторінці "Зіставити сходинку до цілі**" виберіть створити **зіставлення**, а потім переконайтеся, що потрібно створити зіставлення.

2. Зупиніть та оновіть **віхи** контракту на інтеграцію операцій проекту (**msdyn\_ contractlinescheduleofvalues**) карту подвійного запису. 

    1. Перейдіть до **керування** \> **даними Подвійний запис**, виберіть карту та відкрийте її деталі. 
    2. Натисніть кнопку **Зупинити** та зачекайте, поки система зупинить карту. 
    3. Виберіть елемент **Оновити таблиці**.

3. Додайте зіставлення для статусу транзакції.

    1. Виберіть Додати **зіставлення**.
    2. У новому рядку в стовпці **Програми фінансів** та операцій виберіть **поле TRANSSTATUS \[TRANSSTATUS\]**.
    3. У стовпці **Microsoft Dataverse** виберіть msdyn **\_ invoicestatus \[Стан рахунка-фактури\]**.
    4. У стовпці **Тип** карти виберіть стрілку вправо (**\>**).
    5. У діалоговому вікні, що з'явиться, у **полі Напрямок синхронізації** виберіть пункт **Dataverse Програми** Фінанси та Операції.
    6. Виберіть " **Додати трансформування"**.
    7. **У полі Тип** трансформування виберіть **valueMap**.
    8. Виберіть додати **зіставлення** вартості.
    9. У лівому полі введіть **4**. У правому полі введіть **192350001**. 
    10. Натисніть кнопку **Зберегти**, а потім закрийте діалогове вікно.

4. Виберіть зберегти **як**, щоб зберегти версію карти подвійного запису. 
5. **В області Додавання таблиці** в **полі Publisher** виберіть пункт **Видавець** за промовчанням.
6. **У полі Version (Версія**) введіть версію.
7. **У полі Опис** введіть примітку про цю скорочену версію карти. 
8. Виберіть **Зберегти**.
9. Запустіть карту.

### <a name="migrate-invoiced-milestones-to-the-dataverse-environment"></a>Перенесення проміжних етапів рахунків-фактур до навколишнього Dataverse середовища

1. У середовищі Операції Dataverse проекту створіть проміжні етапи зі станом рахунка-фактури "Готово **до виставлення рахунка-фактури**". На цьому етапі не переносіть жодних проміжних етапів, які не були виставлені.

    > [!NOTE]
    > Перш ніж переносити етапи виставлення рахунків, переконайтеся, що фінансові виміри, пов'язані з лінією контракту на проект, установлено належним чином. Фінансові розміри не можна редагувати після завершення міграції.

2. Після того, як всі віхи перенесені, зупиніть наступні карти подвійного запису:

    - Етапи контрактної лінії інтеграції операцій проекту (msdyn\_ contractlinescheduleofvalues)
    - Фактичні дані про інтеграцію Project Operations (msdyn\_actuals)
    - Пропозиція рахунків проекту V2 (рахунки-фактури)

    Щоб зупинити роботу на картах, виконайте такі дії:

    1. У розділі Фінанси перейдіть до **керування** \> **даними Подвійний запис**, виберіть карту та відкрийте її деталі.
    2. Натисніть Кнопку **Зупинити** та зачекайте, поки система зупинить карту.

3. У середовищі Project Operations Dataverse створіть і підтвердьте рахунки-фактури для етапів виставлення рахунків. 

    1. На карті сайту перейдіть до розділу Контракти проекту, виберіть контракти, а потім натисніть кнопку **Створити рахунки-фактури**.
    2. Створивши рахунки-фактури, відкрийте їх **у меню Рахунки-фактури** на карті сайту, а потім натисніть кнопку **Підтвердити**.

    На цьому кроці створюються необхідні записи в навколишньому Dataverse середовищі. Однак це не впливає на фінансові показники та дебіторську заборгованість, оскільки раніше перераховані карти подвійного запису були зупинені.

4. Після того, як всі проформні рахунки-фактури будуть підтверджені, поверніть всі карти подвійного запису в початковий стан.

    1. Оновіть версію **віх** контракту на інтеграцію project operations (**msdyn\_ contractlinescheduleofvalues**) карти подвійного запису назад до оригіналу. 
    2. Виберіть карту подвійного запису у списку карт, виберіть **варіант** таблиці, а потім виберіть вихідну версію карти таблиці.
    3. Виберіть **Зберегти**.
    4. Перезапустіть такі карти подвійного запису:

        - Етапи контрактної лінії інтеграції операцій проекту (msdyn\_ contractlinescheduleofvalues)
        - Фактичні дані про інтеграцію Project Operations (msdyn\_actuals)
        - Пропозиція рахунків проекту V2 (рахунки-фактури)

Віхи тепер перенесені, і система готова до наступних кроків у діяльності з скорочення.
