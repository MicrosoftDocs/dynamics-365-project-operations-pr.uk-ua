---
title: Міграція етапів виставлення рахунків із повністю виставленими рахунками під час повного перенесення
description: У цій статті пояснюється, як перенести проміжні етапи виставлення рахунків за фіксованою ціною, за які клієнту виставлено рахунки, за відкриті проектні сервісні договори до дати навігації.
author: sigitac
ms.date: 01/10/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: 05cd71f9860b5698e3a26bc72660b0b2044206c8
ms.sourcegitcommit: a798fed5c59e3fefa62cdfa42c852d529b33fd35
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 06/18/2022
ms.locfileid: "9028727"
---
# <a name="migrate-fully-invoiced-billing-milestones-at-cutover"></a>Міграція етапів виставлення рахунків із повністю виставленими рахунками під час повного перенесення

_**Застосовується до:** Project Operations для сценаріїв на основі ресурсів і відсутності запасів_

## <a name="scenario"></a>Сценарій

Contoso активує Microsoft Dynamics 365 Project Operations для сценаріїв на основі ресурсів і без запасів. У рамках повного перенесення група впровадження має перенести відкриті проектні сервісні договори зі старої системи. Деякі проектні сервісні договори містять сервісні роботи за договором, які використовують метод фіксованого ціноутворення та на які вже частково виставлено рахунок кінцевому клієнту. Робоча група впровадження має перенести ці проміжні етапи виставлення рахунків як **Опубліковані рахунки для клієнта**, оскільки їх потрібно включити в загальну вартість сервісного договору для цілей визначення доходу. Проте це не має впливати на баланси клієнтів у рахунках до отримання та головній книзі.

## <a name="solution"></a>Рішення

### <a name="prerequisites"></a>вимоги

- Має бути інстальовано Dynamics 365 Finance 10.0.24 або пізнішої версії.
- Середовище, в якому буде завершено кроки міграції, має бути в режимі обслуговування. Під час перенесення проміжних етапів жодні інші справи не мають виконуватися.
- Кроки міграції мають бути точно виконані, як описано тут, і їх можна використовувати лише для повного перенесення. Корпорація Майкрософт не підтримує іншого використання цієї можливості.

### <a name="create-a-cutover-version-of-the-project-operations-integration-contract-line-milestones-dual-write-map"></a>Створення версії для повного перенесення подвійного записування проміжних етапів сервісних робіт за договором інтеграції з Project Operations 

1. Переконайтеся, що цільове зіставлення сутності **Етапи сервісної роботи за договором при інтеграції Project Operations** є актуальним. 

    1. У Finance перейдіть до розділу **Керування даними** \> **Сутності даних** і виберіть сутність **Етапи сервісної роботи за договором при інтеграції Project Operations**. 
    2. Виберіть **Змінити цільові зіставлення**. 
    3. На сторінці **Зіставити етапи з ціллю** виберіть **Створити зіставлення**, а потім підтвердьте, що потрібно створити зіставлення.

2. Зупиніть і оновіть зіставлення з подвійним записуванням **Етапи сервісної роботи за договором при інтеграції Project Operations** (**msdyn\_contractlinescheduleofvalues**). 

    1. Перейдіть до розділу **Керування даними** \> **Подвійне записування**, виберіть зіставлення та відкрийте відомості про нього. 
    2. Виберіть **Зупинити** та зачекайте, поки система зупинить зіставлення. 
    3. Виберіть **Оновити таблиці**.

3. Додайте зіставлення для стану транзакції.

    1. Виберіть **Додати зіставлення**.
    2. У новому рядку в стовпці **Програми для фінансів і операцій** виберіть поле **TRANSSTATUS \[TRANSSTATUS\]**.
    3. У стовпці **Microsoft Dataverse** виберіть **msdyn\_invoicestatus \[Стан рахунку\]**.
    4. У стовпці **Тип зіставлення** виберіть стрілку вправо (**\>**).
    5. У діалоговому вікні, що відкриється, в полі **Напрямок синхронізації** виберіть **Dataverse з програмами для фінансів і операцій**.
    6. Виберіть **Додати перетворення**.
    7. У полі **Тип перетворення** виберіть параметр **ValueMap**.
    8. Виберіть **Додати зіставлення значень**.
    9. У лівому полі введіть **4**. У правому полі введіть **192350001**. 
    10. Натисніть кнопку **Зберегти**, а потім закрийте діалогове вікно.

4. Виберіть **Зберегти як**, щоб зберегти версію зіставлення з подвійним записуванням. 
5. В області **Додати таблицю** в полі **Видавець** виберіть **Стандартний видавець**.
6. У полі **Версія** введіть версію.
7. У полі **Опис** введіть нотатку про цю версію повного перенесення зіставлення. 
8. Виберіть **Зберегти**.
9. Запустіть зіставлення.

### <a name="migrate-invoiced-milestones-to-the-dataverse-environment"></a>Перенесення проміжних етапів, за які виставлено рахунок, до середовища Dataverse

1. У середовищі Project Operations Dataverse створіть проміжні етапи, які мають стан **Готово до виставлення рахунка**. На цьому етапі не переносьте проміжні етапи, за які ще не виставлено рахунок.

    > [!NOTE]
    > Перед перенесенням проміжних етапів виставлення рахунків переконайтеся, що фінансові виміри, пов’язані з сервісною роботою за проектним договором, налаштовано, як очікувалося. Після завершення перенесення фінансові виміри редагувати не можна.

2. Після перенесення всіх проміжних етапів зупиніть наведені нижче зіставлення з подвійним записуванням.

    - Етапи сервісної роботи за договором при інтеграції Project Operations (msdyn\_contractlinescheduleofvalues)
    - Фактичні дані про інтеграцію Project Operations (msdyn\_actuals)
    - Пропозиція рахунків проекту V2 (рахунки-фактури)

    Щоб зупинити зіставлення, виконайте такі дії:

    1. У Finance перейдіть до розділу **Керування даними** \> **Подвійне записування**, виберіть зіставлення та відкрийте відомості про нього.
    2. Виберіть **Зупинити** та зачекайте, поки система зупинить зіставлення.

3. У середовищі Project Operations Dataverse створіть і підтвердьте рахунки-проформи для проміжних етапів виставлення рахунків. 

    1. На карті сайту перейдіть до сервісних договорів проекту, виберіть сервісні договори, а потім виберіть **Створити рахунки**.
    2. Після створення рахунків відкрийте їх у меню **Рахунки** на карті сайту, а потім натисніть кнопку **Підтвердити**.

    На цьому кроці створюються обов’язкові записи в середовищі Dataverse. Проте це не впливає на фінансові дані та рахунки до отримання, оскільки раніше перелічені в цьому списку зіставлення з подвійним записуванням зупинено.

4. Після підтвердження всіх рахунків-проформ поверніть усі зіставлення з подвійним записуванням до початкового стану.

    1. Оновіть версія зіставлення з подвійним записуванням **Етапи сервісної роботи за договором при інтеграції Project Operations** (**msdyn\_contractlinescheduleofvalues**) до вихідної. 
    2. Виберіть зіставлення з подвійним записуванням у списку зіставлень, виберіть **Версію зіставлення таблиці**, а потім виберіть вихідну версію зіставлення таблиці.
    3. Виберіть **Зберегти**.
    4. Перезапустіть наведені нижче зіставлення з подвійним записуванням.

        - Етапи сервісної роботи за договором при інтеграції Project Operations (msdyn\_contractlinescheduleofvalues)
        - Фактичні дані про інтеграцію Project Operations (msdyn\_actuals)
        - Пропозиція рахунків проекту V2 (рахунки-фактури)

Тепер проміжні етапи перенесено, і система готова до наступних кроків у справі повного перенесення.
